--- Log opened Thu Jan 09 00:00:29 2014
06:34 < rrapozo:#liferay> jhf: Are you there? :)
07:39 <@jhf:#liferay> hey rrapozo
07:39 < rrapozo:#liferay> me!!! :D
07:39 <@jhf:#liferay> yes I think so - I think there are a few different issues going on here
07:39 <@jhf:#liferay> first off, which browser are you using?
07:40 < rrapozo:#liferay> I tried with firefox and chromium
07:40 <@jhf:#liferay> hmm ok.. and on firefox, do you see the progress bar at all (even if it does not actually move with the progress)?
07:41 <@jhf:#liferay> what I found was that I could not see it on Chrome, but always saw it on FF. further, depending on the size of the file, it sometimes never updated because Tomcat caches the entire file first before handing it off to Liferay, so by the time Liferay code "sees" the upload, it's already 100% done.
07:42 <@jhf:#liferay> when I change the max upload size in Liferay to something huge (like 100GB) then upload, say, a 4GB file, it works for me,.
07:42 < rrapozo:#liferay> yes, it happens! The progress bar show but dont move
07:42 <@jhf:#liferay> ok. can you first try it agin, but with a file that is ~ 99MB (the default max upload size is 100MB I believe)
07:43 < rrapozo:#liferay> ok!
07:43 < rrapozo:#liferay> can you send the code java em html please?
07:44 < rrapozo:#liferay> because I want have the same environment
07:44 < rrapozo:#liferay> And I'm creating one file with 99MB
07:46 <@jhf:#liferay> ok.. are you on unix? because I have hard-coded the directory to "/tmp" (where the file is saved after uploading)
07:46 < rrapozo:#liferay> yes, ubuntu 13.10
07:46 < rrapozo:#liferay> :)
07:46 < rrapozo:#liferay> perfect!
07:47 <@jhf:#liferay> java code: https://gist.github.com/anonymous/8333579
07:47 <@jhf:#liferay> my JSP: https://gist.github.com/anonymous/8333586
07:48 <@jhf:#liferay> I was playing with setting the progress attribute directly (via getPortletSession().setAttribute()) but I don't actually think this is needed.
07:49 <@jhf:#liferay> rrapozo:
07:49 <@jhf:#liferay> java code: https://gist.github.com/anonymous/8333579
07:49 <@jhf:#liferay> [7:45am] <jhf>
07:49 <@jhf:#liferay> my JSP: https://gist.github.com/anonymous/8333586
07:49 <@jhf:#liferay> [7:46am] <jhf>
07:49 <@jhf:#liferay> I was playing with setting the progress attribute directly (via getPortletSession().setAttribute()) but I don't actually think this is needed.
07:49 <@jhf:#liferay> if it doesn't work with 99MB we'll try something larger
07:49 < rrapozo:#liferay> ok
07:50 <@jhf:#liferay> but you'll need to set the maximum size limit higher (via Control Panel).
07:50 <@jhf:#liferay> also, are you operating entirely on localhost? e.g. there's no "real" networking between your browser and server?
07:51 < rrapozo:#liferay> yes, I can try in a network
07:59 <@jhf:#liferay> I believe what's happening is that over the local network (localhost), when Tomcat attempts to parse the incoming HTTP POST (containing the binary payload), it is able to read the entire file before handing back to Liferay, so Liferay never sees "progress" until 100%. I think with a huge file, and/or using a "real" network link, Tomcat won't see all the bits so fast, and will hand control back to Liferay to process the stream and "see" progress.
08:00 <@jhf:#liferay> so, in other words, it "works" but progress isn't shown nicely.
08:01 < rrapozo:#liferay> ok, I will test now
08:01 <@jhf:#liferay> To increase the max allowed file size, go to Control Panel -> Server Administration (its near the bottom of Control Panel in 6.1).
08:01 <@jhf:#liferay> then click the "File Uploads" tab
08:01 <@jhf:#liferay> and change the first setting ("Overall Maximum File Size") to something huge.
08:02 <@jhf:#liferay> and click Save
08:02 <@jhf:#liferay> then try again with a larger file, say, 2GB or more
08:08 < rrapozo:#liferay> Nice!!! I will read slowly and understant everything but one think is that the progress worked with a file 98.9MB
08:27 < jhf3000:#liferay> <-- jhf but on mobile
09:32 -!- mode/#liferay [+o rotty3000] by ChanServ
