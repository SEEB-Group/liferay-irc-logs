--- Log opened Thu Aug 15 00:00:59 2013
01:52 < Axxell> hey guys, ive asked this before, but is there any way i can force the preview creation of images from a portlet? this does happen in document media display, when previews are not generated for images, so i want to do the same thing, but cant find it in the code
02:06 < topolik> Hi Axxell, see https://github.com/liferay/liferay-portal/blob/6.1.1-ga2/portal-service/src/com/liferay/portlet/documentlibrary/util/ImageProcessorUtil.java
02:32 < LRAdminInNeed9> Hi all, sorry for the 'test' messages; it's for a new Marketplace contest app. Most tests were done in a different room; but had to check this channel to be sure. I don't expect any more such testing. Thanks for your patience with yesterday's tests.
02:35 < Axxell> topolik: thanks, just what i needed
02:35 < topolik> ;)
02:51 < Axxell> topolik: one question, do you think you can cast a FileVersion to DLFileVersion or convert it in some way?
03:03 < Axxell> apparently not.. hmm.. now i need to find something how to do that
03:14 < topolik> Axxell: https://github.com/liferay/liferay-portal/blob/6.1.1-ga2/portal-impl/src/com/liferay/portal/repository/liferayrepository/model/LiferayFileVersion.java
03:15 < topolik> I'd create your implementation
03:15 < topolik> I believe for image previews you don't need to implement all methods
03:45 < Axxell> wonder why i get "LiferayFileVersion cannot be resolved to a type"
03:53 < Axxell> i seem to be an eternal noob, got it to import from portal-impl.jar but when i try to run it on liferay i get: java.lang.NoClassDefFoundError: com/liferay/portal/repository/liferayrepository/model/LiferayFileVersion
04:12 < Axxell> cant implement LiferayFileVersion..
04:12 < Axxell> Somehow just need to get DLFileEntry, DLFileVersion or something to work with FileEntry and FileVersion
04:14 < Axxell> somebody has an example here: http://java-liferay.blogspot.fi/2012/10/how-to-add-file-to-media-gallery.html, but he doesnt explain how he gets FileEntry from DLFileEntry
04:31 < Axxell> got it to work with:  myFileEntry = DLAppServiceUtil.getFileEntry(OneDLImage.getFileEntryId()); and myVersion = myFileEntry.getFileVersion();
10:12 < josuebc> Hi there, I have succesfully mapped the SecureFilter to a custom servlet which gets run by the DelegateServlet. The thing is that I actually need the AutoLogin Filter but when I map it the filter doesn't do anything. Any ideas how to add a servlet to the Auto Login Filter mappings?
10:13 < jardineworks> josuebc, why are you using an auto login filter instead of an auto login hook?
10:15 < josuebc> jardineworks: Mmmmhhh... Good question. Basically I didn't want to create a hook just to handle the login. Thought I could do it only by modifying my web.xml. It would probably be better to use a hook, right?
10:16 < jardineworks> josuebc, definitely
10:17 < jardineworks> josuebc, hooks are the most awesome part of Liferay my friends
10:17 < jardineworks> friend*
10:17 < josuebc> jardineworks: Wait, but I don't want to add another form of authentication to liferay. I just want to check that the user is correctly authenticated when the user accesses my custom servlet.
10:18 < jardineworks> josuebc, If I understand correctly what you are trying to do, the autologin would run first and then once the user is in the delegate security filters should take over.
10:18 < jardineworks> josuebc, until you authenticate, you're nobody in the portal right?
10:18 < josuebc> jardineworks: correcto mundo.
10:19 < jardineworks> hook it
10:19 < jardineworks> :)
10:19 < jardineworks> plus the autologin hook will take you about 5 minutes to build
10:20 < josuebc> jardineworks: Haha ok, then I think I am not understanding you. So you mean to create a hook and add it to the list of hooks fired up by the AutoLogin filter?
10:23 < jardineworks> josuebc, nope... you can create a Liferay hook that will allow you to specify a class that you want to use as your AutoLogin class. You implement the AutoLogin interface in your class, provide a definition for the "login" method, deploy the hook.. bobs your uncle.
10:24 < josuebc> jardineworks: Well, that's the thing I don't want to create my own AutoLogin class, but to use the ones liferay is usnig right now. Because we use cas
10:24 < jardineworks> josuebc, are you using eclipse
10:24 < jardineworks> josuebc, ah
10:24 < jardineworks> josuebc, so your user credentials are in another system?
10:25 < jardineworks> the user fills in the details and then you validate them against the other system right?
10:26 < josuebc> jardineworks: Well, I want liferay to handle the login. Then the user access the servlet, and if the user is logged in then the servlets goes ahead
10:27 < josuebc> if not well then just redirect to the login page
10:27 < jardineworks> josuebc, let's back up for a second. User enteres their credentials in the Liferay signin portlet right?
10:29 < josuebc> jardineworks: YEap, the regular one. My servlet is not going to login anything.
10:29 < jardineworks> josuebc, ok .. so the user submits and it goes to your CAS hook right? what does the CAS hook do?
10:30 < jardineworks> meaning -- does it look for the user in Liferay? or somewhere else?
10:32 < josuebc> jardineworks: Well it just login the user and then liferay has the session on the cookies as usual
10:33 < Tar-Minyatur> Oh lovely. Hardcoded ENUMs containing the names of DDLs within the modified Liferay core sourcefiles.
10:34 < Tar-Minyatur> Who would ever think that to be a good idea? Oo
10:36 < jardineworks> josuebc, Wait...
10:36 < jardineworks> josuebc, You're using CAS to do a regular login? Can I ask why?
10:41 <@jhf> hey rotty3000 - yt?
10:42 < josuebc> jardineworks: Well not sure about that. I am not in charge of that. I only need to check if the session is correct.
10:43 < jardineworks> josuebc, weird. Ok -- well, I don't think you can have a CAS and AutoLogin... if you have an AutoLogin hook, it will bypass the CAS I believe.
10:47 <@jhf> hey all - this last quarter's "Top Contributors" are in the running for a prize and I'd like to hold the drawing live, here on IRC, right now, and need 1 to help me with the drawing, to ensure fairness and unbiased awarding. any takers? it'll only take a minute or so.
10:47 <@jhf> you can see the three in the running here: http://www.liferay.com/community/special-projects/top-contributor-awards-2013 :)
10:47 <@jhf> one of them will join the room momentarily
10:47 <@jhf> (Kamesh)
10:47 <@rotty3000> jhf: yeah, I'm here
10:48 <@jhf> rotty3000: ! hey can you be my assistant for the drawing - will only take 1 min.
10:48 <@rotty3000> surething
10:48 < josuebc> jardineworks: Alright, I just wanted the filter to check if the user is logged in, by looking into the session. And if its then it will call the servlet class and if not then it will redirect to the login page. Theres already a hook that does this, but I can't seem to call the AutoLoginFilter
10:48 <@jhf> kamesh! hey dude, here we go. here's how it'll work:
10:48 < Kamesh> hey @jhf
10:48 <@jhf> I will send rotty3000 a list of three names, in a random order, in a private message. then kamesh will randomly choose a number from 1 to 3 to choose the winner
10:49 <@jhf> and rotty3000 will announce the winner
10:49 < Kamesh> cool
10:49 < jardineworks> josuebc, Assuming for a second that you could call the AutoLogin ... what would you do there? If the user is not logged in then you would need them to provide credentials right? AutoLogin is normally used for cases where you KNOW who the user is and you want to grant them access without any input from them.
10:50 <@jhf> ok, rotty3000 you have the names?
10:50 < jardineworks> josuebc, sounds to me like what you have now is the correct solution. Not logged in? login, then delegate.
10:50 <@rotty3000> I have the names!
10:50 <@jhf> ok. drumroll please. Kamesh, pick a number from 1 to 3
10:51 < Kamesh> 3
10:51 <@rotty3000> The winner is ........
10:51 <@rotty3000> !!!!!!!!!!!!  Kan  !!!!!!!!!!!!!!!!!!!
10:51 < Kamesh> great!
10:51 <@jhf> sorry Kamesh - you were #2. the winner is Kan Zhang
10:51 < josuebc> jardineworks: Oh, then I was not understanding how the AutoLoginFilter works. Then the SecureFilter is ok, the only problem is that if the user is logged in the SecureFilter will still ask for a usr and pass.
10:51 < jardineworks> hahah --- rotty3000 -- that made me think of Star Trek :)
10:51 < Kamesh> hey no worries
10:51 <@rotty3000> haha me too!
10:52 <@jhf> Kamesh: all is not lost. I will PM you separately with a runner up prize :)
10:52 < Kamesh> oh no worries
10:52 < Kamesh> thanks, its nice to have some pumping hearts
10:53 < Kamesh> got bit nostalgic about my college days
10:53 <@jhf> haha. because of IRC? :)
10:53 < Kamesh> when there were draws no my class
10:53 < Kamesh> about lucky draws
10:53 < Kamesh> i always loose :)
10:53 < jardineworks> josuebc, Let me give you an example I used. Back before the portal CAME with SSO support, I worked on a project where the user signed in to OpenSSO. OpenSSO would pass in the header the name of the user that was authenticated to the portal. The entire portal was secure so any access required login. The AutoLogin hook would intercept the request and look the suer up (UserLocalServiceUtil) .. and if they were found would create the
10:53 < jardineworks>  credentials array to let them into the portal. So the user Logs into System A and is automatically logged into Liferay. At least that was how I used it.
10:54 < jardineworks> Kamesh, you were really close though! L, M, __N__... and if you dropped a few letters...
10:56 < josuebc> jardineworks: Alright, so then you would have to send the user to the filter.
10:57 < jardineworks> josuebc, After login... right.
10:59 < josuebc> jardineworks: So, is there any filter that just checks the Session from the request and verifyies that the user doing the request is a correclty authenticated user. After all the userid cookie is on the request.
11:00 < josuebc> I can do this programaticaly but I wouldl like to use a Liferay filter.
11:02 < jardineworks> josuebc, you can create a hook for that too... one sec.
11:02 < jardineworks> josuebc, servlet.service.events.pre
11:03 < jardineworks> josuebc, you can check to see if the user is logged in, and if they are not redirect them to the login page.
11:03 < josuebc> jardineworks: Actually i am doing that already on the servlet. But I wanted to know if liferay already has something that I can use for this.
11:07 < jardineworks> josuebc, the only other thing I can think of is setting a page to secure so that a user has to be signed in to get to it :)
11:07 < Tar-Minyatur> Lovely. 4 GB of memory assigned to the tomcat serving Liferay to even get it to start. *lol*
11:08 < Tar-Minyatur> And what memory should I use to run Eclipse now? :D
11:09 < josuebc> jardineworks: Hehe, alright, thanks for the help! really good info.
11:09 < Tar-Minyatur> If anybody suggests downloading more RAM now, I'm gonna become a murderer. ;)=
11:13 < jardineworks> I have a web content template question for the masses. If I have a structure field called "name" (for example) then the way to access it's value in a (VM) template is $name.getData()  -- right?
11:13 < Tar-Minyatur> Any of you have a bare instance of Liferay running? Can you tell me how much memory it needs doing nothing? Would be really interesting to do a comparison, but I don't fire fire up a second instance.
11:14 < Tar-Minyatur> *dare fire
11:16 <@jhf> Tar-Minyatur: the defaults set in setenv.sh (for tomcat bundle) are the minimum recommended to do nothing (well, you can do more than that, but if you deploy many plugins you'll run out after about 15 or 20)
11:16 < Tar-Minyatur> I just fire up our instance and it now sits on almost 3 GB.
11:16 <@jhf> -Xmx1024m -XX:MaxPermSize=256m
11:16 < Tar-Minyatur> And I haven't even started using it.
11:17 <@jhf> which jvm ?
11:17 < Tar-Minyatur> Oracle 1.7 64 Bit
11:17 < Tar-Minyatur> build 1.7.0_25-b17, if you need more specifics. ;)
11:18 <@jhf> so, what Xmx setting are you specifying when starting the jvm process?
11:18 < Tar-Minyatur> Anything below 4096 leads to memory errors.
11:18 <@jhf> you can see it with ps, usually it's on the command line
11:19 <@jhf> how many plugins are you deploying? that eats up memory, even if you are doing "nothing"
11:20 < Tar-Minyatur> We have 7 custom plugins deployed. And I guess none of the default plugins have been deactivated (I suppose that would help).
11:20 <@jhf> yeah there are steps you can take to reduce the memory footprint. but I think there's something else going on if you can't even start it up with < 4G of heap
11:21 < Tar-Minyatur> I guess they messed up something during modding the core so heavily...
11:21 < x91031> Tar-Minyatur: try runnig: df -h; free
11:21 < jardineworks> jhf, any tips for the web content question?
11:22 < x91031> jardineworks: looks like it's just $name.data, not $name.getData()? (see http://t.bvakili.com/wc-template-field-data)
11:22 <@jhf> the discussion with josuebc ?
11:22 < Tar-Minyatur> I think tomorrow I will deploy all the plugins one-by-one and see if I can find one that is particularly memory hungry.
11:22 <@jhf> or x91031  :)
11:23 < Tar-Minyatur> Yikes. This project drives me crazy.
11:23 <@jhf> Tar-Minyatur: yeah, good idea. you can use free tools like virtualvm or the eclipse memory analyzer or even jhat if you're feeling frisky
11:23 <@jhf> err
11:23 <@jhf> visualvm
11:23 <@jhf> http://visualvm.java.net/ and http://www.eclipse.org/mat/
11:23 <@jhf> both awesome
11:24 < Tar-Minyatur> Yeah. Had to work with MAT on my last project.
11:24 < jardineworks> x91031, no dice. In both cases it actually renders $name.getData() or $name.data on the screen in place of the value.
11:24 < Tar-Minyatur> Finding memory leaks in ColdFusion.
11:24 < Tar-Minyatur> That was fun. ;D
11:24 <@jhf> I even MAT on an android project (the liferay events app) - saved my ass multiple times
11:24 < Tar-Minyatur> I'll consider it if the "easy" approach doesn't work.
11:25 <@jhf> jardineworks: what is $name ? a structure field?
11:25 < Tar-Minyatur> Btw...I managed to track down the DDL publishing thing I was going on about some days ago. They actually implemented a full publishing process for DDLs.
11:26 < Tar-Minyatur> But it's messy as hell. They use the names of the DDLs to find matching copies on live, delete all records from there and fill it with all records from staging again etc.
11:26 < Tar-Minyatur> No idea who would even consider that a good solution...
11:27 < jardineworks> jhf, yep... I has a structure called "Sample Structure" .. I have a few fields but just trying to get one to work right now
11:27 < jardineworks> I'm sure I have had this working in the past... not sure why it is plaguing me right now.
11:27 <@jhf> is the template properly "linked" to the structure? when you create a template, you have to say what structure it references.
11:28 <@jhf> and then when authoring an article, ensure the structure and correct template are selected in the GUI
11:28 <@jhf> but yes, $name.data and $name.getData() are synonymous and should work
11:29 < jardineworks> checking -- but I think that is all correct.
11:30 < jardineworks> ugh
11:30 < jardineworks> I just realized that I made the variable name Name not name.
11:30 < jardineworks> fail.
11:30 <@jhf> hahaha --
11:33 < jardineworks> hurray!
11:34 < x91031> jhf: any issue with logging messages? So people can search IRC logs too.
11:35 <@jhf> nope - but no idea how to set that up!
11:35 <@jhf> is that a freenode config option or something?
11:36 < x91031> It's a bot configuration, I think; I'm adding an app for it (marketplace).
11:36 < x91031> http://liferay.seebgroup.com/irc-search.php?q=jhf
11:37 <@jhf> wow.. so who is doing this logging?
11:38 < x91031> It's an irssi bot here; check it out: http://www.irssi.org/
11:39 < jardineworks> x91031, jhf oooouu... I might pull that into Oracle Endeca Information Discovery and do some analytics :)
11:39 < jardineworks> be interesting to see what most people struggle with
11:39 < x91031> jardineworks: the history dates backs only two weeks; but should be interesting soon, I think.
11:40 <@jhf> x91031: who is the bot?
11:40 < x91031> bijoo:
11:40 < jardineworks> x91031, but I can have a job that adds the new day every night
11:40 <@jhf> ahh.. ok.
11:41 <@jhf> gonna put that in the topic
11:41 <@jhf> (that the channel is logged)
11:41 -!- jhf changed the topic of #liferay to: Liferay Community Discussion Channel! *THIS CHANNEL IS LOGGED* Plz be patient - timezones matter :)  Liferay 6.2 Beta: http://goo.gl/C4gc1e Marketplace App Contest http://goo.gl/H9oJb  Forum: http://forums.liferay.com Liferay 6.1 GA2: http://bit.ly/MbDcUF
11:41 -!- jhf changed the topic of #liferay to: Liferay Community Discussion Channel! *THIS CHANNEL IS LOGGED* Plz be patient - timezones matter :)  Liferay 6.2 Beta: http://goo.gl/C4gc1e  Forum: http://forums.liferay.com Liferay 6.1 GA2: http://bit.ly/MbDcUF
11:41 <@jhf> heh.. marketplace contest ends today..
11:42 < jardineworks> jhf, you shoul dmake it "BIG BROTHER IS WATCHING"
11:42 < jardineworks> "BIG BROTHER (bijoo) IS WATCHING"
11:42 <@jhf> haha.. yeah, not everyone will get that reference though :)
11:42 <@jhf> oh and I should include a url to the log eh?
11:42 < jardineworks> do people actually READ the topic anyway? L(
11:42 < jardineworks> :)
11:43 <@jhf> I'll put it in the welcome msg too..
11:43 < x91031> jhf: http://liferay.seebgroup.com/irc/
11:43 -!- jhf changed the topic of #liferay to: Liferay Community Discussion Channel! *THIS CHANNEL IS LOGGED* (Log: http://goo.gl/SMte1N) Plz be patient - timezones matter :)  Liferay 6.2 Beta: http://goo.gl/C4gc1e  Forum: http://forums.liferay.com Liferay 6.1 GA2: http://bit.ly/MbDcUF
11:44 <@jhf> shortened it - topics have a max length
11:45 -!- mode/#liferay [+o jhf] by ChanServ
11:45 <@jhf> there we go - now the entry msg forces you to read (I hope) upon joining the channel
11:46 <@jhf> hey x91031 - is there a story behind that nick :)
11:46 <@jhf> it looks like a phone extension
11:46 < x91031> jhf: my nick is bijoo; this is for testing :)
11:46 <@jhf> ahh
11:47 < x91031> just testing the marketplace contest app ;)
11:48 <@jhf> ohh nice! well you better hurry!
11:48 < x91031> yes, submitting last entry there right now ;)
12:04 < Tar-Minyatur> Oh. Btw...guys..there are two different ways of editing a structure. Either in the structure's own view where the options are fairly limited or by clicking "edit structure" from within a web content article and then the form is much more feature-rich.
12:05 < Tar-Minyatur> I'm having trouble editing a structure that was modified using the latter one.
12:05 < Tar-Minyatur> When I try saving it in the structure's own edit view, I get an error that the XML is invalid.
12:05 < Tar-Minyatur> And I haven't even changed anything. It's the XML generated by the other edit view. Anyone ever stumbled upon that?
12:08 < Tar-Minyatur> http://issues.liferay.com/browse/LPS-26173
12:08 < Tar-Minyatur> That could be it.
12:08 < Tar-Minyatur> Of course. Fixed in 6.1.2 and I can't update. *sigh*
12:10 < darkos> hey there @jhf and @rotty3000
12:11 <@jhf> heya
12:11 <@rotty3000> hello
12:12 < darkos> I filed a bug regarding 6.2 b1 and glassfish.  I don't see that anything has happened with it yet.  just wondering what the turn around time on someone looking at these things are.  once liferay is installed, it appears to be impossible to access the web gui admin tool for glassfish.
12:12 < darkos> here is URL to the report.  did I miss something important out? :http://issues.liferay.com/browse/LPS-38988#comment-341581
12:13 < darkos> I'm quite looking forward to the OSGI related stuff that's in 6.2
12:13 <@jhf> I'm pretty sure I know why this is - and it was this way in 6.1 too I believe.
12:13 < darkos> actually, with 6.1, the admin web gui for glassfish works just fine.
12:13 <@jhf> actually wait - this happens when you're *not* using the GF+LR bundle?
12:14 < darkos> prior to liferay being installed, the web gui works fine.  install liferay, and you can not access the glassfish web gui.  uninstall liferay and restart glassfish, and you can again access the web gui for glassfish.
12:15 <@jhf> yeah that is something new then.
12:15 < darkos> something in 6.2 is clobbering the glassfish admin web gui.
12:15 <@jhf> yep. and you're part of the beta program. lets see, who is the lead of the systems track. justin choi
12:16 < darkos> and, since glassfish 4.0 is now 'production', why aren't you guys packaging/targetting that??
12:17 <@jhf> yeah, I think we need to upgrade to it, I filed a bug to track this a few months ago (internally) - I'll ask about it.
12:17 < darkos> that would be very much appreciated.
12:19 <@jhf> ok I'll get you an answer in the next hour, as the team rolls in in california :)
12:20 < darkos> cool.  I appreciate the help.
12:20 < darkos> hey Ray, it's sure nice to see some of the OSGI stuff making it's way to the surface!
12:20 <@jhf> no prob - there's probably a convenient workaround for this issue. I'll give it a go - btw what's the url to access the admin console?
12:21 < darkos> the default port is 4848
12:21 < darkos> ie: for the admin gui for glassfish.
12:21 <@jhf> so its just localhost:4848 ?
12:21 < darkos> yep
12:21 < darkos> of course, you can change it, but that is the default.
12:21 <@jhf> ok. I would expect this issue to happen with the 3.1.2.2 bundle too (which I am downloading now) - however I think that in our bundles, we don't bundle the admin console IIRC
12:22 <@jhf> and for some reason (I think related to the filesystem layout) even if you install it you can't access.. looking into it
12:22 <@rotty3000> darkos: after the portal is deployed, go into Liferay's "tempdir" and delete the osgi-bootstrap.jar and restart glassfish  (e.g. domain-dir/generated/<app-name>)  http://docs.oracle.com/cd/E18930_01/html/821-2417/beayb.html#indexterm-377
12:23 < darkos> Jeff, not sure about that.  I think you provide / target the web profile, but, that does not mean the admin gui is not there and available.  after all, there are things to be configured even with the web profile.
12:24 < darkos> Ray, I'll give that a try.
12:25 <@rotty3000> assuming         s/Jeff/(jhf|James) ? ;)
12:25 < darkos> sorry, yes, James.
12:26 <@jhf> darkos: agreed.. just saying, I think we are preventing it for 2 different reasons (one when using the bundle, the other when not)
12:26 <@jhf> both BUGS :)
12:28 <@rotty3000> jhf, darkos: that may stem from a legacy of Liferay not being a "reloadable" web app (i.e. requiring a full app server restart when changing configs) while most webapps are restartable
12:29 <@rotty3000> and so it's possible that the admin gui was disabled to prevent admins from attempting to "restart" liferay web app..
12:29 <@rotty3000> OR, it could be an OSGi confilict bug, which is the foundation for my earlier suggestion to remove the osgi-boostrap.jar from Liferay scratch dir
12:35 <@jhf> btw darkos there is the #liferay-beta channel in which the track leads and a few other QA people sit in
12:36 <@jhf> when justin arrives I'll make sure he is there and is aware of the issue.
12:36 < darkos> rotty3000, ummmm by 'tempdir', are you referring to a location such as: G:\lr62b1gf3122\glassfish-3.1.2.2\domains\domain1\generated\jsp\liferay-portal\loader_773422386\com\liferay\portal\deploy\dependencies\osgi\core ?
12:36 < darkos> ah.  yeah, I see the other channel.
12:37 <@rotty3000> not that one
12:37 < darkos> oh?
12:37 < darkos> then where?
12:38 <@rotty3000> start at this folder: G:\lr62b1gf3122\glassfish-3.1.2.2\domains\domain1\generated\jsp\liferay-portal     and search recursively for system-packages.txt file
12:38 <@rotty3000> in the same folder is the osgi-bootstrap.jar
12:39 < darkos> yep.  ok.  found it.  just delete it and restart?
12:39 <@rotty3000> in fact, remove the org.eclipse.osgi.jar as well
12:39 < darkos> ok.
12:39 <@rotty3000> yeah, delete restart
12:41 <@rotty3000> they may actually get regenerated.. if so, I have to figure out something else to prevent the bundled osgi container from starting for you
12:42 <@rotty3000> note.. I'm not even sure this is the cause.. it's just a guess
12:42 < darkos> looks like they just reappeared in that folder again.
12:43 <@rotty3000> ok, I thought that might happen as well
12:43 <@rotty3000> sec
12:44 <@jhf> whoa
12:44 <@jhf> the GF bundle blew up when I started it up :(
12:45 < darkos> you looking like a racoon now??
12:45 < darkos> he he....
12:45 <@jhf> I got a
12:45 <@jhf> [#|2013-08-15T16:41:15.251+0000|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=62;_ThreadName=Thread-2;|Exception while visiting org/apache/log4j/AsyncAppender.class of size 6069
12:45 <@jhf> java.lang.NullPointerException
12:45 <@jhf> 	at org.glassfish.hk2.classmodel.reflect.impl.TypesImpl.getType(TypesImpl.java:78)
12:45 <@rotty3000> ok, this is more harsh, but it's just a test right?     make copy of the org.eclipse.osgi.jar   then crack it open, and delete the /META-INF/services folder inside, and restart
12:45 <@jhf> and then when I try to hit localhost:8080 I get
12:45 <@jhf> [#|2013-08-15T16:44:24.377+0000|INFO|glassfish3.1.2|javax.enterprise.system.core.security|_ThreadID=253;_ThreadName=Thread-2;|JACC Policy Provider:Failed Permission Check: context (" liferay-portal/liferay-portal ") , permission (" ("javax.security.jacc.WebUserDataPermission" "" "GET") ") |#]
12:45 <@jhf> and a big error in my browser
12:46 <@jhf> gonna start over just to make sure
12:48 <@rotty3000> some link me the GF bundle DL url?
12:48 <@rotty3000> s/some/someone/
12:49 <@jhf> http://sourceforge.net/projects/lportal/files/Liferay%20Portal/6.2.0%20B1/liferay-portal-glassfish-6.2.0-ce-b1-20130801091812389.zip/download
12:49 <@rotty3000> thx
12:50 <@jhf> to run it, you have to first chmod a+x glassfish-3.1.2.2/bin/*
12:50 <@jhf> then glassfish-3.1.2.2/bin/asadmin start-domain
12:50 <@jhf> then tail -f glassfish-3.1.2.2/domains/domain1/logs/server.log
12:50 <@rotty3000> thx for the quick notes ;)
12:50 <@jhf> heh sorry if you knew that :) but not everyone runs GF (it's a distant #2 to tomcat)
12:51 <@jhf> of course, being from sun/oracle, I used to do this all the dang time
12:51 <@rotty3000> :)
12:51 <@jhf> yep same errors this time
12:52 <@jhf> something's seriously wrong with the GF bundle. probably some security declaration missing in some random xml
12:52 <@jhf> JACC Policy Provider:Failed Permission Check: context (" liferay-portal/liferay-portal ") , permission (" ("javax.security.jacc.WebUserDataPermission" "" "GET") ")
12:52 <@rotty3000> does it run without the Liferay app deployed?
12:52 <@jhf> good q. I shall try now.
12:53 <@rotty3000> I think I know what this might be.. new GF probably already has Java Security enabled!
12:54 <@jhf> well our bundles use gf 3.1.2.2
12:54 <@rotty3000> and Liferay doesn't have enough perms by default
12:54 <@jhf> and this wasn't an issue with 6.1 GA2
12:54 <@rotty3000> hmm
12:54 <@rotty3000> ok, I'
12:54 <@rotty3000> I'll stop speculating
12:56 <@jhf> although, I think our 6.1 GA2 bundles used GF 3.1.2 (not 3.1.2.2)
12:56 <@jhf> but there weren't that many changes, and I've not heard of failures with the 6.1 CE GA2 GF bundle
12:56 <@jhf> ok well I unzipped the 6.2 GF bundle, deleted the liferay wars under domains/domain1/autodeploy
12:56 <@jhf> and GF starts up ok (and rather quickly, as you would imagine)
12:57 <@jhf> and the :8080 page is the "your server is running" message
12:57 <@jhf> soooooo
12:57 <@jhf> I shall now try to manually deploy the LR 6.2 war
12:57 <@jhf> using the admin console
12:58 <@rotty3000> I'm trying  it with             glassfish-3.1.2.2/bin/asadmin start-domain --verbose --debug        and shall do some debugging
12:59 < darkos> thank you for your attention to this issue James and Ray.... it sure is vexing.
13:01 <@jhf> manual deployment in progress.. watching log
13:03 <@jhf> Nope, same error (I explicitly deployed it to /)
13:03 <@jhf> ACC Policy Provider:Failed Permission Check: context (" liferay-portal/liferay-portal ") , permission (" ("javax.security.jacc.WebUserDataPermission" "" "GET:CONFIDENTIAL") ")
13:03 <@jhf> I wonder why it says a context of liferay-portal/liferay-portal though
13:07 <@jhf> darkos: I wonder how you even got Beta to run given this..
13:08 < darkos> all I did was follow the instructions for a fresh install by hand.  I typically don't take the bundled glassfish because I want the full profile, not the web profile.
13:09 <@jhf> yup. you may have configured your GF to allow the failing permissions to not fail. hopefully ray can figure this one out, and we'll get it fixed asap.
13:10 < darkos> ie: install glassfish, add jdbc/mail then set up the .properties files to point to my jdbc/mail, then do the manual deploy of liferay-portal.war via the web gui.
13:10 <@jhf> and this was with 3.1.2.2 ?
13:11 < darkos> I did that with 4.0 initially, and then I think I tried the gf bundle.
13:14 < darkos> could be that by manually putting the .properties files in place, that the permissions issue did not crop up that you might otherwise be seeing.
13:14 <@jhf> possibly!
13:14 <@jhf> could you try the bundle real quick, not try to configure it at all, just run it?  http://sourceforge.net/projects/lportal/files/Liferay%20Portal/6.2.0%20B1/liferay-portal-glassfish-6.2.0-ce-b1-20130801091812389.zip/download
13:17 <@rotty3000> our policy manager is enabled. so I'm checking to see the source of the failed permission checl
13:18 <@rotty3000> WOW weird... so, I got the portal running without errors.. but only with the debugger connected!
13:20 <@rotty3000> what is the admin console port again?
13:22 <@rotty3000> also got the console running!
13:24 <@rotty3000> ok, maybe not
13:24 <@rotty3000> it started to load.. but never finished and on refresh, got a 404
13:28 < darkos> yeah, I kinda saw something like that too.
13:29 < darkos> at least it's behaving consistently bad.
13:29 <@rotty3000> however, I got the portal to not make that error on startup
13:29 <@jhf> wait, ray you didn't get the permission (" ("javax.security.jacc.WebUserDataPermission" "" "GET:CONFIDENTIAL") error on the log ?
13:29 <@jhf> admin is :4848
13:30 <@rotty3000> after running the portal with debug, then not, I not longer got the permission error in the log
13:30 <@jhf> but you *did* get it without debugger?
13:30 <@jhf> just want someone to make sure I'm not crazy or it's specific to my JVM :)
13:30 <@rotty3000> only the first start
13:31 <@jhf> ok gonna try and restart
13:31 <@rotty3000> the second I started with --debug (and changed the debug options to include suspend=y
13:31 <@rotty3000> I wanted to make sure I caught the security manager initializing
13:31 <@rotty3000> .. it started without errors..
13:32 <@rotty3000> after stoping, and starting again without --debug I again did not get the error
13:32 <@jhf> ok I am restarting.. watching the log...
13:35 <@jhf> ok yup, second start, no errors for LR. trying admin console.
13:35 <@jhf> gonna file a bug about the first start issue though
13:35 <@rotty3000> admin seems to get setup properly acording to the log
13:36 <@rotty3000> [#|2013-08-15T17:27:06.732+0000|INFO|glassfish3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.admin.adapter|_ThreadID=265;_ThreadName=Thread-75;|The Admin Console application is loaded.|#]
13:36 <@jhf> I get a 404 when I try to access localhost:4848
13:36 <@rotty3000> but then spins infinitely, sais to refresh if wait is too long, but on refresh, 404
13:36 <@jhf> I get (in the log): File "/Users/jhf/lr/gfbeta/liferay-portal-6.2.0-ce-b1/glassfish-3.1.2.2/lib/install/applications/__admingui/common/index.jsp" not found|#]
13:37 <@rotty3000> I got a screen before that error
13:37 <@jhf> and indeed that file isn't there (but the dir is)
13:37 <@rotty3000> did you see these messages?
13:37 <@rotty3000> The Admin Console is already installed, but not yet loaded.|#]
13:38 <@rotty3000> The Admin Console is starting. Please wait.|#]
13:38 <@rotty3000> The Admin Console application is loaded.|#]
13:38 <@jhf> yep I do see those
13:38 <@jhf> see I think our bundles somehow don't include the full adminconsole some how. I'm gonna compare our bundle with stock 3.1.2.2 (I think I did this before)
13:39 <@jhf> in fact I think we strip out a bunch of stuff .. checking our build files that build the bundles.
13:40 <@rotty3000> even my OSGi telnet console is working fine
13:40 <@rotty3000> which means it's not the OSGi parts conflicting
13:41 <@jhf> I also think we blow up "Update Center" in gf 3.1.2.2 bundles
13:41 <@jhf> yeah we just take the vanilla glass fish bundle from oracle, then only bake in the "glassfish/" subdirectory
13:42 <@jhf> and for example, we omit the "pkg" directory, and "javadb" and others.. the "pkg" directory makes update center work.
13:42 <@jhf> https://github.com/liferay/liferay-portal/blob/master/build-dist.xml#L885
13:44 <@rotty3000> yeah
13:44 <@jhf> so we start with this zip: http://dlc.sun.com.edgesuite.net/glassfish/3.1.2.2/release/glassfish-3.1.2.2-web.zip
13:45 <@jhf> (45MB)
13:45 <@rotty3000> that's just the web profile right?
13:45 <@jhf> yup
13:45 <@rotty3000> it's not the complete app server
13:45 < darkos> yep.
13:45 <@jhf> but it includes the admin console
13:45 <@jhf> in particular, the index.jsf file , which is NOT present in our bundles for some reason
13:46 < darkos> bear in mind guys, that, I have tried this also with GF4.0, and get the same result.
13:46 <@jhf> from that zip, we only take the glassfish3/glassfish contents
13:46 < darkos> ie: by manually doing the install.
13:46 <@jhf> so that blows up update center
13:46 < darkos> after the add of liferay-portal, the web gui is inaccessible.
13:46 < darkos> uninstall liferay-portal, and it magically becomes usable again.
13:47 < darkos> that's installing on top of the full profile.
13:48 < darkos> so there *may* be something interesting going on with regards to what you choose to include in the bundle or not, but, that, I think, is not the whole story.
13:49 <@rotty3000> k, going to change the build scripts to use the full GF, deploy Liferay, and see what happens
14:21 < jardineworks> rotty3000, guess what I just found! "Everything inside of an aui:script block that contains a “use” attribute is called asynchronously, so it could fire right away (if the resources are on the page) or if the network resolution is taking a long time, it could execute later on."
14:21 <@rotty3000> yeah, that's by design
14:21 < jardineworks> remember the other day when I asked  you why AUI use instead of AUI ready?
14:22 <@rotty3000> forgot about that
14:22 < jardineworks> though I still like "Because I was told to do it that way" as an answer
14:22 <@rotty3000> but yeah, if you want inline, you need to specify it
14:22 <@rotty3000> howeverm inline means lots of small js blocks which pause execution during their evaluation
14:23 <@rotty3000> which is why the script tag collects them.. sorry brain fart on the details before
14:23 < jardineworks> oh really? so use could cause the portlet to take longer to load?
14:23 < jardineworks> ah
14:23 <@rotty3000> too many things going on
14:23 <@rotty3000> other way around
14:23 <@rotty3000> inline will make it slower
14:23 < jardineworks> and inline is for "ready"?
14:24 <@rotty3000> the whole point of the collecting to the bottom of the page into one script block is: performance
14:24 < jardineworks> sure -- that is true of all JS no?
14:24 < jardineworks> oh -- now I see the inline thing.
14:24 < jardineworks> you mean, executed when the browser gets to that line, rather than sinking it all to the bottom
14:24 <@rotty3000> however, why "ready"?
14:25 <@rotty3000> I'm not sure about that one
14:25 < jardineworks> so aui:script can be placed anywhere in the page but will always sink the JS to the bottom?
14:25 <@rotty3000> correct on that last
14:25 < npskirk> 'ready' is to be sure the whole dom is there before you try to call on it
14:25 <@rotty3000> not only will it.. but it will collect all the modules, and only load them once for the whole page
14:25 < jardineworks> i thought "ready" was like Jquery... where nothing is executed, no matter where it is, until the page (portlet) is loaded.
14:25 <@rotty3000> as opposed to each time for every user
14:26 < npskirk> @jardinewoks  I believe you are right on that score
14:26 <@rotty3000> jardineworks: you could be right about ready.. I'm not sure about it
14:27 < jardineworks> JS is bananas in pijamas. I wish I had taken it more seriously all these years :)
14:27 < npskirk> @jardineworks  I'm with you on that one
14:30 <@rotty3000> ditto
15:06 <@jhf> so rotty3000 any findings w/GlassFish ?
15:11 <@rotty3000> I'm having a heck of time with the full bundle
15:12 <@rotty3000> i.e. no success yet
15:12 <@jhf> so another person reported that it works fine with java 6 ! so I'm trying that now..
15:12 <@rotty3000> ah!
15:12 <@jhf> well, meaning they didn't get the security errors
15:12 <@jhf> haven't tried admin console yet
15:12 <@jhf> its coming up now
15:12 <@rotty3000> perhaps GS is broken for the u25 build of java 1.7 like so many other things
15:13 <@rotty3000> u40 was released just yesterday, so that should solve lots of those issues
15:13 <@rotty3000> hopefully it solves this one too
15:13 <@rotty3000> it'll take a couple days to filter down to us common folk
15:15 <@jhf> ok it failed for me - using the latest 1.6 update 1.6.0_51-b11-457
15:15 <@jhf> that's the _51 one that broke other stuff too
15:15 <@rotty3000> right
15:19 <@rotty3000> where exactly does the admin app sit?
15:21 <@jhf> the "uninstalled" bits sit at glassfish-3.1.2.2/lib/install/applications/__admingui
15:22 <@rotty3000> right, but the key jsp is missing right?
15:22 <@jhf> when you hit that 4848 URL, it "installs" it (and presumably does something else, e.g. compiles the .jsf to a .jsp or something) and places it into the domains/domain1/applications/internal/__admingui place
15:29 <@rotty3000> I hate.. that GF can't recover from failed deploys... and i hate the logging!
15:30 < Tar-Minyatur> Doesn't everybody hate Glassfish and jump around happily whenever Tomcat is sufficient for a project? ;)
15:33 < jardineworks> hey rotty3000 .. qq when you have a second. Do you know if it is possible to add "blank rows" to a search-container and have them render? and is it possible to edit rows/cols inline?
15:33 <@rotty3000> I'm sure it's a great app server.. I just rarely use it, and when I do it's painfull... HOWEVER, it'
15:33 <@rotty3000> it's still MILES and MILES less painfull than Weblogic!
15:35 < darkos> glassfish is preferred above all others as far as I'm concerned.
15:35 < Tar-Minyatur> I heard there are people who use IIS instead of a proper appserver. ;)
15:36 < Tar-Minyatur> Anyway. I usually prefer having somebody on the team who takes the whole messing around with the server stuff off my hand.
15:36 < Tar-Minyatur> Feels like you can waste sooo much time on that if you're not really into it.
15:38 < Tar-Minyatur> And while I'm fairly able to do it, I hate it with a passion. ;)
15:38 <@rotty3000> jardineworks: regarding the rows.. I think you can, as long as you blank the row data, as for edit inline... you're asking the wrong guy
15:39 < jardineworks> :)
15:39 < jardineworks> damn the ALLOY!
15:40 <@rotty3000> man that first startup error is annoying!
15:40 <@jhf> hey ray - is that new jdk downloadable?
15:41 <@rotty3000> uhmm, check the DL page, Dalibor announcement it yesterday, but that might just mean "it's ready to be packaged and shipped"
15:41 < darkos> https://jdk7.java.net/download.html
15:41 <@rotty3000> and there it is
15:42 <@rotty3000> it's an EA, but should do the trick
15:45 <@rotty3000> ok something very strange is going on...
15:46 <@rotty3000> does anyone else get massive stacktrace when hitting the GH:8080 after successfull deploy/startup ?
15:46 <@rotty3000> s/GH/GF/
15:49 <@jhf> ok coming up on the EA..
15:49 <@rotty3000> .. I think it has something to do with java security
15:50 <@jhf> haha also getting a certificate expired for a CA cert that expired yesterday
15:50 <@jhf> doubt that has anything to do with this..
15:51 <@rotty3000> anyone aware of a source bundle of GF?
15:53 <@jhf> dang.. same security error with the _40 EA release
15:53 <@jhf> JACC Policy Provider:Failed Permission Check: context (" liferay-portal/liferay-portal ") , permission (" ("javax.security.jacc.WebUserDataPermission" "" "GET:CONFIDENTIAL") ")
15:54 <@jhf> 1.7.0_40-ea-b38
15:54 <@rotty3000> I think the error is actually against Liferay, i.e. a security policy is being enabled that is restricting the operations of Liferay itself
15:54 <@rotty3000> this is to be expected in certain cases
15:54 <@jhf> so why does it work on second run?
15:55 <@rotty3000> I need to find the default security policy, if you know where it is, let me know
15:55 <@rotty3000> .. found it!
15:55 <@jhf> ./domains/domain1/config/server.policy ?
15:56 <@rotty3000> <jvm-options>-Djava.security.policy=${com.sun.aas.instanceRoot}/config/server.policy</jvm-options>
15:56 <@rotty3000> ;)
15:58 <@rotty3000> changed the whole file to simply:         grant {    permission java.security.AllPermission; };
15:59 <@rotty3000> brb
16:00 <@jhf> hmm I also got [#|2013-08-15T19:57:39.298+0000|INFO|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=1;_ThreadName=main;|19:57:39,294 ERROR [main][ServerCapabilitiesUtil:61] Unable to determine server capabilities
16:00 <@jhf> java.lang.UnsupportedOperationException
16:00 <@jhf> 	at org.eclipse.osgi.framework.util.Headers.entrySet(Headers.java:299) now
16:00 <@jhf> and a big infinite-loop-looking stack trace
16:00 <@jhf> on 	at com.liferay.portal.server.DeepNamedValueScanner._scanMap(DeepNamedValueScanner.java:469)
16:00 <@jhf> but things seem to work
16:03 <@jhf> ok I filed http://issues.liferay.com/browse/LPS-39095
16:17 <@jhf> btw darkos we're going to *try* to update the bundles to use GF 4 before RC - it may not make it into the "certified" list of app servers supported for EE, but it'll at least be "supported" (the difference is that "certified" means we test it regularly, "supported" means we don't test it regularly, but we believe it to work and have at least one known customer using it in production, and promise to fix bugs related to it when reported by EE customers)
16:17 <@jhf> and by "promise" I mean meet the SLA you sign up for :)
16:41 < darkos> @jhf, that would be a huge step in the right direction.  when you said that things seem to work, that's using which combination of things? just to be clear....?
16:45 <@jhf> meaning that I was able to log into the portal and drive around a bit
16:45 <@jhf> (after a second restart)
16:45 <@jhf> this isn't an issue you are hitting - I think the issue was triggered by a change to recent JDKs
16:45 <@jhf> but just to verify.. which JDK are you using?
16:48 < darkos> 7u25 x64
16:49 < darkos> but what about the glassfish admin gui?
16:49 <@jhf> yeah that's a whole separate issue I believe ray was looking into
16:50 <@jhf> that occurs regardless of jdk
16:50 < darkos> at least it's consistent.  should make it easier to identify and fix.
16:56 <@jhf> hey darkos
16:56 <@jhf> does http://localhost:4848/login.jsf work for you? it does for me
16:57 <@jhf> I at least get the login page
16:57 <@jhf> but can't seem to get past it
16:57 < jardineworks> you guys seem pretty busy but if someone has a second for a liferay-ui:form-navigator question -- I have created one. I have the right hand side menu showing with (just) my two options. However when I click the links, it is not loading the sections.
16:58 < jardineworks> I have two sections... "api-keys" and "rest-services". the jspPath is set t= "/sections/" ... and the individual files are names api-keys.jsp and rest-services.jsp.
16:58 < jardineworks> I think that is all I have to do no?
16:59 < jardineworks> oh
16:59 < jardineworks> wait
17:00 < jardineworks> still not working (my jspPath should actually be /html/sections/ ... but still no love.)
17:01 <@jhf> oh this worked darkos http://127.0.0.1:4848/common/index.jsf
17:02 <@jhf> rotty3000: darkos strange, everything seems to work using 127.0.0.1 vs. localhost
17:03 <@jhf> there are weird stack traces though
17:03 <@jhf> like java.lang.IllegalStateException: REST Server Name not set!
17:03 <@jhf> and that CA cert expiration notice keeps coming up
17:07 <@jhf> hey rotty3000
17:07 <@jhf> dang should have checked issues.liferay.com
17:07 <@jhf> the security error is a known GF bug according to Igor: http://issues.liferay.com/browse/LPS-33917
17:07 <@jhf> known bug: https://java.net/jira/browse/GLASSFISH-19064
17:07 <@jhf> fixed in 4.0.1 of course
17:08 < jardineworks> hmmm... the main page seems to be creating the divs that wrap the "sections" ... but for some reason it is not pulling the content in -- and not giving any errors.
17:16 < jardineworks> bah! you can't use a hyphen or an underscore in the section name?! wait a fail. So I have to specify it as "apikey" and then make a key in the language bundle apikey=API Key
17:16 < jardineworks> booo.
17:17 <@rotty3000> hey jhf so you managed to get the portal working fine with a different JDK ?
17:17 <@rotty3000> or did you also mod the server.policy file?
17:18 <@jhf> nope, just used http://127.0.0.1:4848/login.jsf instead of localhost:4848
17:18 <@jhf> I was able to get the login screen
17:18 <@jhf> so I type in admin / admin
17:18 <@jhf> and it fails
17:19 <@jhf> then I go to http://127.0.0.1:4848/common/index.jsf
17:19 <@jhf> and I am in
17:19 <@jhf> so there's definitely a bug somewhere, I don't think related to JDK, UNLESS it's due to that expired certificate!!
17:19 <@jhf> which just expired midnight last night
17:20 <@jhf> this is all for the admin console issue
17:20 <@jhf> the security errors is a different deal
17:20 <@jhf> that's https://java.net/jira/browse/GLASSFISH-19064
17:22 <@rotty3000> but what about the portal itself?
17:22 <@jhf> portal works fine, after a second restart
17:22 <@rotty3000> hmm...
17:22 <@jhf> err.. after *one* restart (just as you found)
17:22 <@rotty3000> but on which JDK?
17:22 <@jhf> on all that I tried
17:22 <@rotty3000> hmm..
17:22 <@jhf> jdk 6 (latest release) and 7 (latest EA)
17:22 <@rotty3000> using the full app server? or just the web bundle?
17:22 <@jhf> just web profile
17:23 <@rotty3000> ok
17:23 <@jhf> our 3.1.2.2 bundles
17:23 <@rotty3000> let me try again
17:23 <@jhf> k. don't bother about the security errors, I guess it's fixed in 4.x
17:23 <@rotty3000> cause with the full bundle, I have security issue when I first hit the portal
17:23 <@jhf> yeah.. and after restart, you still get it?
17:23 <@rotty3000> this is different security errors
17:23 <@jhf> ah
17:23 <@rotty3000> no way to hit the portal at all
17:23 <@jhf> i have not seen those (other than the expired cert error)
17:23 <@rotty3000> even after successfull restart
17:23 <@jhf> I see
17:24 <@rotty3000> BUT
17:24 <@rotty3000> this is with the full app server
17:24 <@jhf> right
17:24 <@jhf> have you tried with 4.x?
17:24 <@rotty3000> the weird part is that there is a badly created ProtectionDomain object in the permission context
17:24 <@jhf> (I have not)
17:25 <@jhf> gotta run.. bbl.. gotta accept my birthday cake from the family :)
17:25 <@rotty3000> haha, happy BDay! :)
17:45 <@rotty3000> ok, I'm giving up on this GS 3.1.2.2 thing... there has to be a problem with this... nobody creates a ProtectionDomain object with this state.. it would fail no matter what!
19:10 <@rotty3000> so I think I figured out the issue btw
19:10 <@rotty3000> it's sort of a bug with how Jasper (the JSP implementation) is initialized
19:12 <@rotty3000> and I think it's the same reason the admin app was breaking
19:14 <@rotty3000> there is a global constant kept inside the javax.servlet.jsp code ( org.apache.jasper.Constants.IS_SECURITY_ENABLED )
19:14 <@rotty3000> it's set once and never checked again
19:14 <@rotty3000> which breaks when java security is enabled dynamically (as the API clearly allows)
--- Log closed Fri Aug 16 00:00:00 2013
