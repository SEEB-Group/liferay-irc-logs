--- Log opened Thu Sep 12 00:00:40 2013
01:50 < Axxell:#liferay> hey guys, has anybody got webdav to work, with file uploads on windows7?
02:08 < Axxell:#liferay> by the way using apache in front of liferay, when trying to use webdav
07:02 < avinashrbhat:#liferay> hi, i would like to know how it is possible to create an one-to-many relationship between the entities
07:42 < avinashrbhat:#liferay> Tar-Minyatur, got your yesterday's problem fixed?
07:43 < Tar-Minyatur:#liferay> Well...I got ServiceBuilder to run without error and the created files don't throw any errors during compilation.
07:44 < Tar-Minyatur:#liferay> By now I'm stuck with this annoying "BeanLocator has not been set for servlet context" error, when I try to use one of the created services...
07:45 < avinashrbhat:#liferay> whoa i haven't seen that error before.
07:45 < Tar-Minyatur:#liferay> It seems to be pretty common.
07:45 < avinashrbhat:#liferay> any way i'm new to this. so what do i know
07:45 < Tar-Minyatur:#liferay> Earlier I was kinda stuck in a loop at the forums, because most threads about the problem suggest searching the forums.
07:46 < avinashrbhat:#liferay> some of the forums do that. But i found some interesting documentations in the DTD itself
07:47 < avinashrbhat:#liferay> http://www.liferay.com/dtd/liferay-service-builder_6_1_0.dtd
07:47 < avinashrbhat:#liferay> and https://www.liferay.com/community/forums/-/message_boards/message/13182546
07:47 < bjorneven:#liferay> hi guys!
07:48 < avinashrbhat:#liferay> have saved me of some troubles
07:48 < Tar-Minyatur:#liferay> Well...I guess I broke the plugin at some point.
07:48 < bjorneven:#liferay> i have legacy links from LF 5.2.3 from document_library , with suffix DLFE-number.ext
07:48 < Tar-Minyatur:#liferay> Because at first I planned to have several portlets in the same project.
07:48 < bjorneven:#liferay> but they dont work with lf 6 , is DLFE links supported at all?
07:49 < bjorneven:#liferay> the document library shows all the files
07:49 < Tar-Minyatur:#liferay> And now I'm fine with having only one. I guess at some point I broke a config file or something.
07:49 < avinashrbhat:#liferay> maybe you'll be interested in that. FYI I'm using a one-to-many model
07:49 < Tar-Minyatur:#liferay> I actually have a one-to-many and two many-to-many relations in my model.
07:49 < Tar-Minyatur:#liferay> But by now I can't say if it really works...I can only say that it didn't cause any errors so far. ;)
07:50 < avinashrbhat:#liferay> Tar-Minyatur, seems like the collection interfaces will not be created. So don't waste time in that direction as i did. :-(
07:53 < Tar-Minyatur:#liferay> avinashrbhat: http://pastie.org/private/lwcbyhkpo1lq0voc1kwmtw
07:53 < Tar-Minyatur:#liferay> That's what my service.xml looks like.
07:54 < Tar-Minyatur:#liferay> There is a one-to-many relationship between Product and ProductVariation. And the other relationsships are many-to-many.
07:54 < Tar-Minyatur:#liferay> From what I've seen so far, the generated code looks good.
07:54 < Tar-Minyatur:#liferay> But as I said...haven't been able to test that yet, because I broke my plugin. :D
07:54 < Tar-Minyatur:#liferay> I will probably just start from scratch.
07:56 < avinashrbhat:#liferay> starting from scratch usually get me of the errors too :D
08:35 < kim023:#liferay> H tth
08:35 < kim023:#liferay> how to install chat room
08:45 < mr_sarna:#liferay> hi everybody
08:59 < Tar-Minyatur:#liferay> Hi there, jardineworks . ;)
08:59 < jardineworks:#liferay> hey Tar
09:02 < jardineworks:#liferay> rotty3000, sorry for the abrupt departure the other day when you were helping me with structures that reference structures.
09:02 < jardineworks:#liferay> was late to go get my son from daycare :)
09:05 < mr_sarna:#liferay> I have a situation with my liferay installation liferay-portal-6.1.1-ce-ga2 using OpenLDAP as an authentication backend
09:15 < Tar-Minyatur:#liferay> jardineworks: Do you remember that I was fiddling around with ServiceBuilder? This one is the latest service.xml I composed: http://pastie.org/private/lwcbyhkpo1lq0voc1kwmtw
09:16 < Tar-Minyatur:#liferay> It actually ran through without errors and I didn't see any errors after importing the generated files into Eclipse.
09:17 < mr_sarna:#liferay> Guys I have a situation with my liferay installation "liferay-portal-6.1.1-ce-ga2". Im using OpenLDAP as my authentication backend
09:18 < mr_sarna:#liferay> Liferay is storing the users password on the database and I haven't found a way to make it query the LDAP on every authentication
09:20 < jardineworks:#liferay> Tar-Minyatur, that's good news... right? :)
09:22 < mr_sarna:#liferay> Here is part of my configuration file (portal-ext.properties):   http://pastie.org/8319855#
09:22 < mr_sarna:#liferay> *doesn't
09:22 < jardineworks:#liferay> mr_sarna, did you try configuration under Control Panel > Portal Settings > Authentication?
09:23 < jardineworks:#liferay> usually you set the portal to authenticate against LDAP
09:23 < jardineworks:#liferay> and then it will sunchronize the LDAP repository with the users in LR (through the mapping you set) so that the user exists in LR as well (for permissions, organization association etc.)
09:25 -!- mode/#liferay [+o jhf] by ChanServ
09:31 < mr_sarna:#liferay> The problem is that liferay stores the ldap password
09:31 < mr_sarna:#liferay> When I change the password on OpenLDAP liferay doesnt update
09:32 < mr_sarna:#liferay> I tried with the mentioned parameter to avoid OpenLDAP to store the password on the database; But it doesnt seems to be working
09:32 < mr_sarna:#liferay> :'(
09:36 < Tar-Minyatur:#liferay> jardineworks: Did you ever encounter this annoying "BeanLocator has not been set for servlet context" when building a custom portlet using ServiceBuilder?
09:37 < Tar-Minyatur:#liferay> Happens as soon as I try to use one of the generated classes.
09:44 < jardineworks:#liferay> Tar-Minyatur, Same portlet, or a different portlet?
09:49 < Tar-Minyatur:#liferay> I pretty much set up a new portlet, but I might have messed up some of the configurations at some point, because at first I wanted to have two portlets in the same project and mid-way I changed my mind. ;)
09:50 < Tar-Minyatur:#liferay> I guess I'll create a new one and use the same service.xml again.
09:51 < jardineworks:#liferay> Tar-Minyatur, if you want to user the service builder from one portlet in another, then in the second project (the non service builder one) you need to add a context dependency. Open the liferage plugin dependeces and on the first tab in the bottom right hand corner add the deployment context for the project with the service builder in it
09:51 < jardineworks:#liferay> what that does if it adds a jar to the project B that has the service builder files (compiled of course) from project A
09:51 < Tar-Minyatur:#liferay> Oh...that's what you meant. No...so far I only wanted to start using them in the portlet I created the services in.
09:52 < jardineworks:#liferay> also, if you deploy project B first it will remain in a "waiting to be deployed state" with a message saying that it has a dependency on project A. That way, you can't deploy a porltet that has the dependency and bugger everything up because the dependency is missing
09:54 < Tar-Minyatur:#liferay> Right now I only want to build a portlet for the control panel that allows to perform CRUD operations for the cutom entities.
09:54 < Tar-Minyatur:#liferay> Everything else will be something to be done later.
10:00 < jardineworks:#liferay> Tar-Minyatur, well, you have the service.xml ... if you configured it to be a control panel porlet (in the liferay-portlet.xml file) and you do an ant deploy it should work.
10:02 -!- mode/#liferay [+o rotty3000] by ChanServ
10:08 < Tar-Minyatur:#liferay> jardineworks: The portlet shows up fine. But I get an error when accessing one of the LocalServiceImpls.
10:08 < Tar-Minyatur:#liferay> So I'll try with a fresh plugin now.
10:08 < Tar-Minyatur:#liferay> Just to make sure I didn't mess up something accidentally.
10:17 < Tar-Minyatur:#liferay> No joy.
10:17 < Tar-Minyatur:#liferay> Same problem with the new portlet.
10:17 < jardineworks:#liferay> can you send me the stacktrace?
10:20 < Tar-Minyatur:#liferay> I'll try to extract it.
10:22 < Tar-Minyatur:#liferay> Oh. Just found a deployment error.
10:22 < Tar-Minyatur:#liferay> Let me fix that first.
10:33 < Tar-Minyatur:#liferay> jardineworks: http://pastie.org/private/lqyoc4wozsx82pavd6gg <-- That's the error I get when I call the portlet in the CP.
10:33 < Tar-Minyatur:#liferay> It basically just tries to list all entries for one of the entities I created.
10:33 < Tar-Minyatur:#liferay> You can see the JSP snippet in the message.
10:34 < Tar-Minyatur:#liferay> Would be great, if you can point me in the right direction...searching for that message in the liferay forums is giving me a headache...
10:36 < jardineworks:#liferay> do you have any campaigns in the sytem yet?
10:36 < Tar-Minyatur:#liferay> Nope.
10:37 < Tar-Minyatur:#liferay> Haven't built the page for that yet.
10:37 < jardineworks:#liferay> and you get that when you try to render the page... though you expect to see blank on the assumption that the foreach would detect a null and not show anything?
10:37 < Tar-Minyatur:#liferay> I was just getting started and then got stuck with this error.
10:37 < jardineworks:#liferay> you're using the eclipse plugins right?
10:37 < Tar-Minyatur:#liferay> Sort of.
10:37 < Tar-Minyatur:#liferay> I actually have to use the maven approach.
10:38 < jardineworks:#liferay> if you have them installed, go to the eclipse perspective.
10:38 < jardineworks:#liferay> sorry
10:38 < jardineworks:#liferay> liferay perspective
10:38 < Tar-Minyatur:#liferay> So I'm not entirely sure how much of the eclipse plugin I can use that way.
10:38 < jardineworks:#liferay> and then on the right there is a "snippets" tab
10:38 < jardineworks:#liferay> basically, I am trying to tell you to replace your jstl foreach with a liferay serach-container
10:39 < Tar-Minyatur:#liferay> So...the getEntity methods yield a null instead of an empty list?
10:40 < jardineworks:#liferay> they would
10:40 < jardineworks:#liferay> ... and I am not sure if the foreach handles that
10:40 < jardineworks:#liferay> you might want to wrap it in a c:if test="empty <list>" tag to see
10:41 < jardineworks:#liferay> jstl is utilitarian for me... I don't really have a lot of indepth knowledge on it so not sure.
10:41 < Tar-Minyatur:#liferay> I was going for something simple before I start getting fancy...
10:41 < jardineworks:#liferay> but the search container is slick... builds a table for you right away. All you need to do is point it to your entity and the snipper fills in the rest.
10:42 < jardineworks:#liferay> honestly? the search container would take you 3 seconds to do
10:42 < jardineworks:#liferay> drag the snippet, give it the name, save the jsp, deploy.
10:42 < jardineworks:#liferay> and you can add an attribute to the serach-container (main tag) emptyMessage="No results" and it will display that to you when there are no items in the list or the list is nuill
10:44 < Tar-Minyatur:#liferay> Well...the snippet thingy doesn't work.
10:44 < Tar-Minyatur:#liferay> Apparently it can't find the model classes when it's a Maven project.
10:45 < jardineworks:#liferay> I always use ant because I like living in the past :)
10:46 < Tar-Minyatur:#liferay> Well...I will have to integrate the stuff with our build server later on, so starting out with Maven was supposed to save me a lot of annoying work later on.
10:46 < Tar-Minyatur:#liferay> *sigh*
10:47 < Tar-Minyatur:#liferay> Wrapping it in a c:if didn't help at all.
10:47 < Tar-Minyatur:#liferay> Because the core of the problem is this BeanLocatorException. :-/
10:48 < jardineworks:#liferay> Tar-Minyatur, That's a spring exception... almost like the bean mapping is missing from your configs.
10:49 < jardineworks:#liferay> did you change the name of your entities at all along the way?
10:49 < Tar-Minyatur:#liferay> Nope.
10:49 < Tar-Minyatur:#liferay> I just created a new portlet, copied the service.xml over, executed ServiceBuilder and added the config settings to make the portlet appear in CP.
10:49 < Tar-Minyatur:#liferay> Nothing else.
10:49 < jardineworks:#liferay> open your web.xml for the portlet
10:50 < jardineworks:#liferay> is there an entry like this in there?
10:50 < jardineworks:#liferay> <listener>
10:50 < jardineworks:#liferay> <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
10:50 < jardineworks:#liferay> </listener>
10:50 < Tar-Minyatur:#liferay> Nope.
10:50 < jardineworks:#liferay> one sec.
10:51 < jayj:#liferay> good morning liferay - may I ask why do we need need to have another authentication login pop up using the JSONWS? and why this credential is stored in cache in service builder or cache in liferay itself?
10:51 < jardineworks:#liferay> Liferay 6.1.1CE?
10:51 < Tar-Minyatur:#liferay> 6.1.2 CE
10:52 < jardineworks:#liferay> hmmm -- yeah I am using the same (basically) and my service builder project doesn't have that entry either and when I deploy I don't get that error
10:52 < Tar-Minyatur:#liferay> I don't get that error when deploying.
10:52 < Tar-Minyatur:#liferay> It appears when I open the page that tries to access the service.
10:52 < jayj:#liferay> sorry Tar mind if i ask what is your error?
10:52 < Tar-Minyatur:#liferay> Deployment works fine.
10:53 < jardineworks:#liferay> Tar-Minyatur, under you src/META-INF there is a portlet=-spring.xml .. can you validate that your beans are in there?
10:54 < jardineworks:#liferay> and referenced in the correct packages?
10:54 < Tar-Minyatur:#liferay> Looks ok to me.
10:54 < Tar-Minyatur:#liferay> All the generated services are listed.
10:54 < Tar-Minyatur:#liferay> With id and class exactly the same.
10:55 < Tar-Minyatur:#liferay> For each entry I mean.
10:55 < Tar-Minyatur:#liferay> And the package is correct.
10:55 < Tar-Minyatur:#liferay> Ah.
10:55 < Tar-Minyatur:#liferay> But it's not in the .war.
10:56 < Tar-Minyatur:#liferay> Ah no. It's there.
10:56 < Tar-Minyatur:#liferay> But is /WEB-INF/classses/META-INF the correct location?
10:56 < jardineworks:#liferay> yes
10:56 < Tar-Minyatur:#liferay> That's where all the .xml files end up in the .war.
10:56 < jardineworks:#liferay> src -> classes at compile time
10:57 < Tar-Minyatur:#liferay> Well...then that's ok.
10:57 < Tar-Minyatur:#liferay> Everything is in there.
10:57 < Tar-Minyatur:#liferay> However...
10:57 < Tar-Minyatur:#liferay> The LocalServiceUtil I try to use there, isn't listed.
10:58 < jardineworks:#liferay> that's ok.. service utils are not beans
10:58 < Tar-Minyatur:#liferay> CampaignLocalService is listed as well as CampaignService. Not the Util though.
10:58 < jardineworks:#liferay> just the model objects should be listed
10:58 < Tar-Minyatur:#liferay> Ok.
10:58 < jardineworks:#liferay> oh
10:58 < Tar-Minyatur:#liferay> CampaignPersistence is listed too.
10:58 < jardineworks:#liferay> yeah same for me actually
10:58 < Tar-Minyatur:#liferay> That's it. Those three for every Entity.
10:58 < jardineworks:#liferay> so that must be right
10:59 < jardineworks:#liferay> what about the base-spring.xml ... does that look right?
10:59 < jayj:#liferay> may i ask whats the issue @Tar @ jardine
10:59 < jardineworks:#liferay> jayj, BeanLocator exception for service builder portlet.
10:59 < Tar-Minyatur:#liferay> jayj: http://pastie.org/private/lqyoc4wozsx82pavd6gg
11:00 < jayj:#liferay> thanks
11:02 < jayj:#liferay> may i ask if you're using projetion on your method?
11:03 < Tar-Minyatur:#liferay> jardineworks: It's not empty.
11:03 < Tar-Minyatur:#liferay> But otherwise...no clue.
11:03 < Tar-Minyatur:#liferay> I can't see anything of my stuff in there, but being base-... I guess that's ok.
11:10 < jayj:#liferay> hi jardine good morning can i ask something about service builder ?
11:10 < jayj:#liferay> @Tar have you tried testing first on calling the service  /api/jsonws/ ? and not accessing it form the jsp page?
11:12 < jayj:#liferay> may I ask why do we need need to have another authentication login pop up using the JSONWS? and why this credential is stored in cache in service builder or cache in liferay itself?
11:13 < Tar-Minyatur:#liferay> Actually...my services don't show up in the service list on JSONWS.
11:13 < Tar-Minyatur:#liferay> They are supposed to be sorted into a category named like each of my entities, right?
11:16 < jayj:#liferay> yup, then it was not registered correctly - can you try to double check the entities
11:16 < jayj:#liferay> can we post stockoverflow link here?
11:17 < jayj:#liferay> sometimes i try to create a new Service Builder per entity to isolate the problem
11:18 < Tar-Minyatur:#liferay> I'm just happy ServiceBuilder finally finished without error..
11:18 < jardineworks:#liferay> Tar-Minyatur, out of curiosity, can you quickly try recreating your project using ANT instead of MAVEN just to see if maybe a dependency is missing from your maven config
11:19 < jardineworks:#liferay> ... or have you already solved the error? :)
11:19 < Tar-Minyatur:#liferay> I wish I had.
11:20 < Tar-Minyatur:#liferay> This is so error-prone...I'm not even sure anymore if I should really suggest to use ServiceBuilder when we rebuild our current project...
11:21 < jardineworks:#liferay> if you plan to continue to use LR, and you want to have CRUD operations you should. I wouldn't say that it is fair to call it error prone to be honest. I've never had any issues with it -- though I have never tried to use it with a Maven project.
11:21 < Tar-Minyatur:#liferay> So far I stumbled from one issue to the next.
11:22 < jayj:#liferay> Tar : i would not think its error prone, but rather we are just new with LR
11:22 < jayj:#liferay> i just started LR in 2 months and so far doing a good progress but i know i need more and alot to learn
11:23 < jardineworks:#liferay> Tar-Minyatur, If I remember correctly your implementation of LR is a little unorthodox right? I wouldn't place blame on the system when a.) it was not implemented correctly and b.) you're still learning it. It's always frustrating to learn new tools.
11:23 < jayj:#liferay> but its good feeling when you are challenge and learning new tools :) just my 2 cents
11:23 < jayj:#liferay> :D
11:23 < Tar-Minyatur:#liferay> jardineworks: Nah. I'm working on a fresh installation of LR 6.1.2 now.
11:24 < Tar-Minyatur:#liferay> We pretty much decided to start over and migrate as much stuff as we can without having to modify the core.
11:24 < Tar-Minyatur:#liferay> (Or if we have to...then properly using a hook/ext plugin.)
11:27 < jardineworks:#liferay> Tar-Minyatur, That is your best approahc for sure -- but LR is not HTML. You need to give yourself more than a week to figure out how to use it. Remember that it is a mash up of some of the most widely used open source projects. Chances are, even if you were to build your own custom solution you sowuld end up using one or more of the technologies already in use by LR
11:28 < jayj:#liferay> @Jardine : do you have any idea about my issue on caching and 2nd authentication for jsonws?
11:28 < jardineworks:#liferay> honestly man -- once you know what you are doing with it it is an incredibly powerful tool. The code generation alone can save you weeks, possible months of code/test.
11:28 < jardineworks:#liferay> jayj, sorry -- what was the issue?
11:28 < jardineworks:#liferay> Tar-Minyatur, sales pitch closed.
11:28 < jayj:#liferay> ay I ask why do we need need to have another authentication login pop up using the JSONWS? and why this credential is stored in cache in service builder or cache in liferay itself?
11:28 < jardineworks:#liferay> :)
11:29 < Tar-Minyatur:#liferay> We have no choice but to use Liferay now anyway. I don't have any qualms with LR to be honest...it's just frustrating right now and I'm a little bit on edge, because my opinions carries a lot of weight right now....
11:29 < Tar-Minyatur:#liferay> And I want to make sure that what I suggest and recommend is actually the correct approach.
11:29 < jardineworks:#liferay> jayj, there are two ways to call JSONWS I believe. One you pass the service context that has the authentication of the user in the portal already, another where you pass the credentials into the service.
11:29 < jayj:#liferay> i hear you Tar - it is frustrating sometimes
11:30 < jayj:#liferay> how do you pass it to the service?
11:30 < jayj:#liferay> is it the same as last time?
11:30 < jayj:#liferay> i honestly dont want passing my userid from the jsp to my java class
11:30 < jayj:#liferay> it might be tampered
11:31 < jayj:#liferay> what i did last time is getting the user instant thru BaseServiceImpl.getUser
11:31 < jayj:#liferay> which my XXEntityImpl class extends
11:31 < jayj:#liferay> from api docs i've read im getting the current user that is login
11:32 < jayj:#liferay> sort of true i did get the userinfo but there is an issue im facing is
11:32 < jayj:#liferay> when i login to my Portal ( liferay ) i tried to log the userid in my jsp file
11:33 < jayj:#liferay> so im getting the correct current user that is login
11:33 < jayj:#liferay> but when i call my service and the authentication pop up appears
11:33 < Tar-Minyatur:#liferay> For some reason I can't even execute ServiceBuilder right now from a default (non-Maven) portlet project.
11:33 < jayj:#liferay> i have to login the same credentials to get the data from my external db
11:33 < Tar-Minyatur:#liferay> *sigh*
11:33 < jayj:#liferay> so everything works fine for the first user
11:34 < jayj:#liferay> issues occurs when other user logs in
11:34 < jayj:#liferay> the first user credentials based on the security pop up is being cache
11:34 < jayj:#liferay> afaik - as im logging the user id in my service builder class as well
11:35 < jayj:#liferay> so i think its an issue with the service builder cache
11:35 < jardineworks:#liferay> jayj, Are they GET methods?
11:35 < jayj:#liferay> yes
11:36 < jardineworks:#liferay> jayj, comment out the secure filter section in the web.xml
11:36 < jardineworks:#liferay> if they're just gets then there is no issue really.
11:37 < jardineworks:#liferay> it can become a problem in the case where you want to PUT/POST data though because those methods would also be exposed without security
11:37 < jayj:#liferay> i tried that but unfortunately im getting an authentication issue
11:37 < jardineworks:#liferay> alternatively I think you can user http://username:pass@host...
11:38 < jardineworks:#liferay> which you can get from the User object in the ThemeDisplay (from the request)
11:38 < jayj:#liferay> thats what Ray suggested
11:38 < jayj:#liferay> on the searches i 've done
11:38 < jardineworks:#liferay> there is also a property in the portal-ext -- json.service.auth.token.enabled=false
11:38 < jayj:#liferay> but isnt it bad to have that credential on our service call
11:39 < jardineworks:#liferay> if it is https it shouldn't matter
11:39 < jayj:#liferay> and to have the url i think you still need to pass that credential form JSP to java class
11:39 < jayj:#liferay> done the property setting but problem still persist
11:40 < jayj:#liferay> im not sure if this is an issue on Liferay 6.1.1 CE GA 2
11:40 < jayj:#liferay> that is fixed in GA3
11:40 < jayj:#liferay> can i post a link form liferay forum?
11:41 < Tar-Minyatur:#liferay> Now the build process that executes ServiceBuilder can't find certain classes. What the... *sigh* I surrender. :-/
11:45 < Tar-Minyatur:#liferay> There are so many layers involved...you never know where to look for the problem.
11:45 < jardineworks:#liferay> if your build is failing, I would start with Maven.
11:45 < jayj:#liferay> exactly but i think with service builder you only need to look on the main config files and the main classes
11:45 < jardineworks:#liferay> send me you service.xml again and I'll try it on my side with ant
11:46 < jayj:#liferay> for i only inspect service.xml , ext-spring and impl classes
11:46 < jardineworks:#liferay> Tar-Minyatur, Send me your whole portlet I'll I'll try it on my side -- JSP and all
11:46 < Tar-Minyatur:#liferay> http://pastie.org/private/lwcbyhkpo1lq0voc1kwmtw
11:47 < Tar-Minyatur:#liferay> That's the service.xml
11:47 < Tar-Minyatur:#liferay> I just wanted to build that in a standard portlet project in Eclipse.
11:48 < Tar-Minyatur:#liferay> No idea what's going on there...somehow the setup is messed up and it won't build. (Not using Maven in that case.)
11:48 < Tar-Minyatur:#liferay> Maybe by now I'm just too annoyed to work properly or something...
11:49 < jayj:#liferay> think positive Tar :)
11:50 < jardineworks:#liferay> Tar - ant build-service successful.
11:50 < jardineworks:#liferay> Tar-Minyatur, ant deploy -- successful, noo bean locator issues
11:50 < jardineworks:#liferay> looks like a maven issue to me
11:51 < Tar-Minyatur:#liferay> Do the entities show up in the JSON services?
11:51 < Tar-Minyatur:#liferay> Because for me they don't.
11:51 < jardineworks:#liferay> checking..
11:53 < scribe:#liferay> Hey guys.  Anyone planning to go to Liferay DevCon Berlin in a few weeks?  Thinking of attending.
11:53 < Tar-Minyatur:#liferay> scribe: Thanks for the reminder...I wanted to check that out.
11:53 < jardineworks:#liferay> Tar-Minyatur, I am in localhost:8080/api/jsonws -- is that where you expect to see them
11:53 < Tar-Minyatur:#liferay> Pretty much...yes.
11:54 < jardineworks:#liferay> Tar-Minyatur, I don't think I see them
11:54 < jardineworks:#liferay> I mean, I did a ctrl-f and entered Campaign and it is not found.
11:55 < Tar-Minyatur:#liferay> Well...
11:55 < jayj:#liferay> it will not be there
11:55 < jayj:#liferay> it should be localhost:8080/Service-portlet/api/jsonws
11:55 < jayj:#liferay> from there all your entities in that service will be present
11:55 < jardineworks:#liferay> ah
11:56 < jayj:#liferay> hth
11:57 < Tar-Minyatur:#liferay> I get a 404 for that.
11:57 < Tar-Minyatur:#liferay> Same when I use the name of my portlet.
11:58 < jayj:#liferay> jardine : did you get all the services?
11:58 < jardineworks:#liferay> 404 as well.
11:58 < jardineworks:#liferay> but dont't you need to use the portlet name?
11:59 < jayj:#liferay> if you're service builder name is foo-portlet it should be there at localhost:8080/foo-portlet/api/jsonws
12:00 < jayj:#liferay> that im certain let me try and recreate the service builder  portlet
12:05 < Tar-Minyatur:#liferay> Might just be that ServiceBuilder does NOT like my model definition, but doesn't even realize it.
12:07 < jayj:#liferay> nope
12:07 < jayj:#liferay> i think i might but not for sure
12:08 < jayj:#liferay> can i see your web/xml
12:08 < jayj:#liferay> web.xml
12:08 < Tar-Minyatur:#liferay> Nothing in there.
12:08 < Tar-Minyatur:#liferay> Only the root node.
12:08 < jayj:#liferay> thats the problem :)
12:09 < jayj:#liferay> i got your service working correctly right now
12:09 < jayj:#liferay> http://localhost:8080/foo-portlet/api/jsonws
12:09 < jayj:#liferay> at first i laso get 404
12:09 < jayj:#liferay> but you need to define where your service will be called
12:09 < jayj:#liferay> thats why you're getting 404
12:10 < jayj:#liferay> try to put this in your web.xml
12:10 < jayj:#liferay> http://pastebin.com/hENHnZqf
12:11 < jayj:#liferay> i got your service.xml and put that config to your service builder
12:11 < jayj:#liferay> and i got it working i see the services to that link
12:11 < jayj:#liferay> @jardine i think you missed that as well
12:14 < Tar-Minyatur:#liferay> Well...it doesn't work for me.
12:14 < Tar-Minyatur:#liferay> I put it into my web.xml, repackaged and deployed the portlet...
12:14 < Tar-Minyatur:#liferay> Still a 404.
12:14 < Tar-Minyatur:#liferay> No deployment errors in the log.
12:14 < jayj:#liferay> i could send you my full portlet :)
12:15 < jayj:#liferay> and just import it if you want
12:15 < Tar-Minyatur:#liferay> If you don't mind, I'd gladly take a look at it.
12:15 < jayj:#liferay> here is what i  did
12:15 < jayj:#liferay> create a project foo
12:16 < jayj:#liferay> form the foo project i created a service builder
12:16 < jayj:#liferay> config the service.xml according to your service
12:16 < jayj:#liferay> that is pasted on the link
12:16 < Tar-Minyatur:#liferay> And maybe I should try to get my Eclipse fixed so I can actually try building the portlet without Maven. So far that seems to be the main difference between what we are doing.
12:16 < jayj:#liferay> then config my web.xml
12:16 < jayj:#liferay> ill send you the whole code and the screen shot that is working :)
12:16 < jayj:#liferay> whats your email
12:17 < Tar-Minyatur:#liferay> I sent you a PN.
12:18 < Tar-Minyatur:#liferay> I will compare my stuff to yours tomorrow. Maybe I can find out what's causing the problem.
12:19 < Tar-Minyatur:#liferay> And I probably should try to get this Eclipse mess sorted out. Maybe I'll just have to deal with converting the project into a Maven project later on...or something like that.
12:20 < jayj:#liferay> email sent
12:20 < jayj:#liferay> source plus the screenshot ;)
12:21 < Tar-Minyatur:#liferay> Thanks for your help, jardineworks & jayj. I really appreciate it! I'll be back later when I'm home.
12:21 < jayj:#liferay> no problem
12:21 < Tar-Minyatur:#liferay> This day feels like especially long.
12:21 < Tar-Minyatur:#liferay> Always does in these situations...
12:21 < jayj:#liferay> i feel the frustration
12:21 < jayj:#liferay> as well before
12:22 < Tar-Minyatur:#liferay> Mail is here. Thanks again. See you later.
12:22 < jayj:#liferay> np
12:45 -!- mode/#liferay [+o lundgren] by ChanServ
13:04 < jardineworks:#liferay> rotty3000, are you around for a qq?
13:04 <@rotty3000:#liferay> sure
13:05 < jardineworks:#liferay> rotty3000, thanks. I am trying to do a stupid hack for facebook login. The flow is overly complicated but I tire of fighting with clients so I am just doing it. Essentially, POST facebook authentication, I need to inject logic that will call a rest service to create the user in another system and then redirect them to a "profile" page where they need to complete details.
13:06 < jardineworks:#liferay> I have create a struts action override for FacebookConnectAction .. and that seems to be working, but I beleive that action is being called BEFORE the actual authentication occurs.
13:06 < jardineworks:#liferay> What I can't figure out is where the authentication goes to, and how to get in it
13:07 < jardineworks:#liferay> there is just the one struts action mapping in the struts-config.xml
13:14 < jardineworks:#liferay> rotty3000, do I need to use a ext plugin to pull this off? I thought perhaps a struts action was the secret... but I'm not so sure anymore.
13:15 <@rotty3000:#liferay> hmm...
13:15 <@rotty3000:#liferay> does your struts mapping start with "/portal"
13:16 <@rotty3000:#liferay> if not, it's considered a "portlet" mapping and can't be invoked or forwared to directly (it needs to be part of the portlet request)
13:18 < jardineworks:#liferay> rotty3000, What I have right now is a hook that defines a struts action for /login/facebook_connect_oauth. I have a class specified and I can see the request redirected to MyFacebookAction. In there I do the originalStrutsAction.execute() so that it calls the original struts action (FacebookConnectAction from liferay) to do the login.
13:19 <@rotty3000:#liferay> got it, the thing is..
13:19 < jardineworks:#liferay> When that returns, I would have thought the user was logged in. Is it possible that they are, but that the render phase just hasn't fired yet?
13:19 <@rotty3000:#liferay> you can't block that from continuing to do what it needs to do
13:20 <@rotty3000:#liferay> what I mean is that the original struts action probably wants to redirect somewhere specific
13:20 < jardineworks:#liferay> and I'm not... it does the fb login and then adds the user to LR so all that is great.
13:20 < jardineworks:#liferay> it actually returns to my method
13:20 < jardineworks:#liferay> at that stage though I can't tell if the user is "logged in" because the original request is still what I have, and the user in there is default@liferay.com
13:21 < jardineworks:#liferay> so I don't know if that means the FB login hasn't actually happened yet? or if the render phase or soemthing has yet to occur
13:21 < jardineworks:#liferay> does that make sense?
13:21 <@rotty3000:#liferay> right, honestly I really haven't played with auth pipeline in so long that I'm not really in a position to give you any more info
13:21 <@rotty3000:#liferay> topolik do you have any ideas?
13:22 < jardineworks:#liferay> if they are logged in -- then great, in my action class I can call the rest service to add the user and set a value in the request that a pre-render hook can use to redirect them to a pofile page. I just don't know if that is the right place to do it
13:22 <@rotty3000:#liferay> the thing is it may still need one more , or several more redirects
13:22 < jardineworks:#liferay> rotty3000, generally speaking, in LR, is the action class the point at which the work is performed?
13:22 <@rotty3000:#liferay> some of those SSOs have multiple stage redirects
13:23 <@rotty3000:#liferay> yeah, but it may only be setting HTTP headers or request attributes which are used later
13:23 <@rotty3000:#liferay> but the MainServlet which is the one which actually does the login
13:23 <@rotty3000:#liferay> s/but/by/
13:23 < jardineworks:#liferay> rotty3000, because I see this in the action -- 	String token = FacebookConnectUtil.getAccessToken(
13:23 < jardineworks:#liferay> 			themeDisplay.getCompanyId(), redirect, code);
13:24 < jardineworks:#liferay> which makes me think that that call should actually be doing the call to FB
13:24 < jardineworks:#liferay> and then this is next...
13:24 < jardineworks:#liferay> if (Validator.isNotNull(token)) {
13:24 < jardineworks:#liferay> 			session.setAttribute(WebKeys.FACEBOOK_ACCESS_TOKEN, token);
13:24 < jardineworks:#liferay> 			setFacebookCredentials(session, themeDisplay.getCompanyId(), token);
13:25 < jardineworks:#liferay> which if you look at the setFacebookCredentials method (protected in the same action class) appears to call FB for the graph resources to update the user.
13:30 < jardineworks:#liferay> that must be it. If the user doesn't exist in that action they are added to LR -- that logic should only happen if the FB connect worked.
13:38 -!- mode/#liferay [+o lundgren] by ChanServ
14:11 < jayj:#liferay> does anyone know the sollution for this issue?
14:11 < jayj:#liferay> https://www.liferay.com/web/guest/community/forums/-/message_boards/message/4028418#_19_message_4033964
14:24 < jayj:#liferay> @jardine are you around for a q?
14:25 < jardineworks:#liferay> shoot
14:32 < jayj:#liferay> i have a Hook-Portlet on my Login and I have a Service BUilder POrtlet - i think my question is related to IPC, how can i pass a variable from my CustomLoginPostAction.java from my ServiceBuilderImpl.java?
14:34 < jardineworks:#liferay> you mean pass a variable TO CustomLoginPostAction from service builder?
14:36 < jayj:#liferay> no, the other way around -
14:36 < jayj:#liferay> FROM CustomLoginPostACtion.java to my Service BUilder Java class
14:36 < jardineworks:#liferay> are you using the service build in the action class or after the action has executed?
14:38 < jayj:#liferay> after the action has been executed
14:38 < jayj:#liferay> my entry point is CustomLoginPostAction
14:39 < jayj:#liferay> to Portlet 2 and form the event in portlet2 i use to call teh Service Builder methods to fetch the data
14:39 < jayj:#liferay> so i have 3 portlets right now
14:39 < jayj:#liferay> portlet 1 - CustomLoginPostAction (Hook)
14:40 < jayj:#liferay> portlet 2 - renderer ( plain POrtlet for UI purposes that call the Service )
14:40 < jayj:#liferay> portlet3 - Service Builder portlet
14:41 < jardineworks:#liferay> what kidn of action is it?
14:41 < jardineworks:#liferay> meaning ... what is the signature (forgive me I don't recall)
14:41 < jardineworks:#liferay> Isn't there an http request?
14:42 < jayj:#liferay> inside my portlet 2 i have a javascript call for the service like
14:42 < jayj:#liferay> Liferay.Service(   '/fooService-portlet#summarybyday/get-summary-by-code',   {     code: 3,     providerId: 5   },   function(obj) {     console.log(obj);   } );
14:43 < jayj:#liferay> so when my dropdown changes i getting a different data depending on my filtered request
14:44 < jardineworks:#liferay> ah -- and you CustomLoginPostAction is a hack you are using to pass something because you are being challenged for credentials during JSONWS calls?
14:44 < jayj:#liferay> yup
14:45 < jardineworks:#liferay> you still cant get around that security prompt?
14:45 < jardineworks:#liferay> you need jhf
14:45 < jayj:#liferay> nope - still an issue and i can figure out why - tried alot now
14:45 < jayj:#liferay> www.liferay.com/community/forums/-/message_boards/view_message/15682601
14:46 < jayj:#liferay> this is exactly what im avoiding
14:46 < jayj:#liferay> http://www.liferay.com/web/guest/community/forums/-/message_boards/message/4028418#_19_message_4033964
14:46 < jayj:#liferay> is it ok if i post URL here or links from liferay?
14:47 < jayj:#liferay> sorry im just new and dont know yet the rules on posting here
14:47 < jayj:#liferay> jhf?
14:49 < jayj:#liferay> i planned on doing the passing of userid thru the JAVA classes not thru jsp pages
14:54 < jayj:#liferay> @jardine : what is jhf?
15:35 < jardineworks:#liferay> jayj, Sorry -- tryign to get something done today so I haven't been paying attention here. I think it is fine to post links, but I am not a moderator :)
15:35 < jardineworks:#liferay> jhf is James Faulkner. Liferay guy.
15:36 < jardineworks:#liferay> I've seen him helping more than a few people with JSONWS stuff -- but he is not online today.
15:39 < jayj:#liferay> oh okey
15:39 < jayj:#liferay> @jardine are you using a service builder as well?
15:39 < jardineworks:#liferay> yep
15:40 < jayj:#liferay> how do you handle the second authentication ?
15:40 < jayj:#liferay> do you do it the first that you suggest http://email:password@local/service call
15:51 < jardineworks:#liferay> jayj, to be honest, I've never used the services wtih JSON.
15:51 < jardineworks:#liferay> closest I have come is ajax resource calls.
16:10 < jardineworks:#liferay> I have a question if anyone is around.
16:11 < jardineworks:#liferay> its not SPECIFICALLY liferay... but I am doing this WITH liferay so I think I can still ask here :)
16:11 < jardineworks:#liferay> I have a java project that I compile into a JAR that is deployed to LIFERAY_TOMCAT_HOME/lib/ext -- so that it is available to all my portlets, hooks etc.
16:11 < jardineworks:#liferay> this project uses log4j for some fairly verbos logging...
16:12 < jardineworks:#liferay> its my integration framework so kinda important when you want to know what is going on.
16:12 < jardineworks:#liferay> ANyway, at startup I get this warn --
16:13 < jardineworks:#liferay> log4j:ERROR A "org.apache.log4j.ConsoleAppender" object is not assignable to a "org.apache.log4j.Appender" variable.
16:13 < jardineworks:#liferay> log4j:ERROR The class "org.apache.log4j.Appender" was loaded by
16:13 < jardineworks:#liferay> log4j:ERROR [org.apache.catalina.loader.StandardClassLoader@3b274069] whereas object of type
16:13 < jardineworks:#liferay> log4j:ERROR "org.apache.log4j.ConsoleAppender" was loaded by [WebappClassLoader
16:13 < jardineworks:#liferay>   context: /mercatus-facebook-login-hook
16:13 < jardineworks:#liferay>   delegate: false
16:13 < jardineworks:#liferay>   repositories:
16:13 < jardineworks:#liferay>     /WEB-INF/classes/
16:13 < jardineworks:#liferay> ----------> Parent Classloader:
16:13 < jardineworks:#liferay> org.apache.catalina.loader.StandardClassLoader@3b274069
16:13 < jardineworks:#liferay> ].
16:13 < jardineworks:#liferay> log4j:ERROR Could not instantiate appender named "CONSOLE".
16:14 < jardineworks:#liferay> actually, that might not be the one... but at any rate I have tried placing my log4j.properties in many places but it NEVER seems to be found and as a result I get no logging.
16:14 < jardineworks:#liferay> does anypne know how to solve this?
16:23 < jayj:#liferay> can i see your log4j settings?
16:54 < jardineworks:#liferay> jayj,
16:54 < jardineworks:#liferay> one sec
16:54 < jardineworks:#liferay> # Root logger option
16:54 < jardineworks:#liferay> log4j.rootLogger=DEBUG, stdout
16:54 < jardineworks:#liferay>  
16:54 < jardineworks:#liferay> # Direct log messages to stdout
16:54 < jardineworks:#liferay> log4j.appender.stdout=org.apache.log4j.ConsoleAppender
16:54 < jardineworks:#liferay> # Pattern for appender
16:54 < jardineworks:#liferay> log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
16:54 < jardineworks:#liferay> log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n
16:54 < jardineworks:#liferay> this is the error
16:54 < jardineworks:#liferay> log4j:WARN No appenders could be found for logger (com.mercatus.service.MercatusService).
16:54 < jardineworks:#liferay> log4j:WARN Please initialize the log4j system properly.
16:54 < jardineworks:#liferay> log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
16:54 < jardineworks:#liferay> warning really, but the result is not logging output
17:35 < adaro:#liferay> of all the bad idea's placing lots of code in tomcat/lib must be one of the worst
17:38 < jayj:#liferay> did you try changing your settings?
17:38 < jayj:#liferay> log4j.rootLogger=FATAL, All  log4j.rootLogger=DEBUG, A1 log4j.appender.A1=com.A log4j.appender.Console=org.apache.log4j.ConsoleAppender
--- Log closed Fri Sep 13 00:00:41 2013
