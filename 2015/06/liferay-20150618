--- Log opened Thu Jun 18 00:00:58 2015
--- Log opened Thu Jun 18 05:23:05 2015
05:23 -!- Topic for #liferay: Liferay Community Discussion Channel! *THIS CHANNEL IS LOGGED* (Log: http://goo.gl/SMte1N) Plz be patient - timezones matter :)  6.2 CE GA4 RELEASE http://goo.gl/AjubK5   Forum: http://forums.liferay.com Homepage: http://liferay.org User Groups http://goo.gl/WFVtPe Nightly build http://releases.liferay.com/portal/nightly-master/
05:23 -!- Topic set by jhf [~cygnuseck@97-101-250-88.res.bhn.net] [Fri Apr 17 17:33:27 2015]
05:23 [Users #liferay]
05:23 [@ChanServ  ] [ g00se       ] [ jbub       ] [ Naenyn  ] [ vsingleton] 
05:23 [ bijoo     ] [ Gorith      ] [ josuebc    ] [ plekplek] 
05:23 [ bodik     ] [ henriquev   ] [ kermitt    ] [ quercus ] 
05:23 [ Bryanstein] [ iDavid_     ] [ MagnoBooter] [ Tm_T    ] 
05:23 [ doged     ] [ jardineworks] [ marcoceppi ] [ topolik ] 
05:23 -!- Irssi: #liferay: Total of 21 nicks [1 ops, 0 halfops, 0 voices, 20 normal]
05:23 -!- Channel #liferay created Wed Nov 11 15:40:06 2009
05:23 -!- Irssi: Join to #liferay was synced in 5 secs
09:37 < hufg:#liferay> hello!
09:37 < hufg:#liferay> i'm trying to make another portal instance but if i'm logged in as omniuser can't access the pages
09:37 < hufg:#liferay> huh?
09:38 < hufg:#liferay>  com.liferay.portal.NoSuchResourcePermissionException: No ResourcePermission exists with the key {companyId=20552, name=com.liferay.portal.model.Layout, scope=4, primKey=20581, roleId=20164}
10:03 < jardineworks:#liferay> hufg, are you one on the main instance? or on the newly created instance?
10:05 < hufg:#liferay> newly created
10:08 < dave_k:#liferay> A coworker created a Liferay Service using a String as Primary Key. Now I have to enable its entities to be used as an asset. Is my hunch correct that if want to call assetEntryLocalService.updateEntry(), the classPK argument must be the PrimaryKey used in service.xml? And because of the method signature, PrimaryKeys have to be of type long? And that I have to restructure the whole Service?
10:09 < jardineworks:#liferay> hufg, but you created the NEW instance from the main instance, correct?
10:09 < hufg:#liferay> yes
10:09 < jardineworks:#liferay> hufg, which version are you on?
10:09 < hufg:#liferay> latest 6.2 ee sp11
10:09 < jardineworks:#liferay> hufg, ok cool... I have that one too.
10:09 < jardineworks:#liferay> hufg, and then when you try to log into your new instance, you get that error?
10:09 < hufg:#liferay> hmm well
10:10 < hufg:#liferay> the thing is it's an external env somewhere
10:11 < hufg:#liferay> i create the portal by logging through the public http address
10:11 < hufg:#liferay> then the first thing i did was to create another instance, i use the public http address as instance virtualhost
10:11 < hufg:#liferay> this is everything with the first user omniadmin
10:11 < hufg:#liferay> after that i'm unable to log into the instance at all with the omni user
10:12 < hufg:#liferay> shouldn't it be possible though?
10:12 < jardineworks:#liferay> dave_k, normally PKs are longs. If you can't change the service, then you could wrap the value in a GetterUtil.getLong() ... sosomething like..
10:13 < jardineworks:#liferay> assetEntryLocalServiceUtil.updateEntry( GetterUtil.getLong(classPkThatIsAString) );
10:13 < hufg:#liferay> then i'm actually unable to log at all
10:14 < jardineworks:#liferay> hufg, the omniadmin doesn't mean you can log into everything... it just means you have access to all portal functions (including those normally restricted to the main instance) from any instance. For example, Portal Instances, and Server Administrator
10:14 < jardineworks:#liferay> those are normally only allowed to be accessed from the main instance.
10:14 < hufg:#liferay> uhuh ok
10:14 < jardineworks:#liferay> but I believe omniadmin users can get to them anywhere.
10:15 < jardineworks:#liferay> but when you craete a new instance, then another "admin" user record will be created, scoped with a different companyId
10:15 < hufg:#liferay> mm ok so uhh how to access that admin
10:15 < jardineworks:#liferay> sooo lets say Main instance admin user is 1234
10:15 < hufg:#liferay> this is wierd
10:15 < jardineworks:#liferay> so you put ominiadmin.users=1234
10:16 < jardineworks:#liferay> but then in the new instance, the admin user is 4567
10:16 < hufg:#liferay> i've got it as default
10:16 < jardineworks:#liferay> .. you log into the new instance with the 4567
10:16 < jardineworks:#liferay> but you need to (I think -- been a while since I used this!) add 4567 to the omniadmin.users property
10:17 < jardineworks:#liferay> once you do, then the 4567 user should be able to see Portal Instances and Service Administration from the Second (non main) instance you created.
10:17 < jardineworks:#liferay> (again, all from memory here .. and it's been a while)
10:18 < hufg:#liferay> yeah ok well nevermind i think i can get some support on monday anyways
10:18 < hufg:#liferay> this shit just took me by surprise
10:18 < hufg:#liferay> figured i got the env working
10:19 < jardineworks:#liferay> can you log into the new instance with test@liferay.com / test?
10:20 < dave_k:#liferay> jardineworks: Thanks, but since the PK is actually a URL String, there's no point in converting it.
10:20 < jardineworks:#liferay> dave_k, :|
10:20 < jardineworks:#liferay> fail/
10:20 < jardineworks:#liferay> lol
10:20 < hufg:#liferay> nope cant
10:20 < jardineworks:#liferay> then I would add another attribute to the entity definition, a long
10:20 < jardineworks:#liferay> remove the PK from the URL
10:21 < jardineworks:#liferay> update the table records ... just increment a value
10:21 < dave_k:#liferay> exactly my reaction, jardineworks m)
10:21 < jardineworks:#liferay> and update the source to use the CounterLocalServiceUtil when creating a new entity
10:21 < jardineworks:#liferay> hufg - can you see the database?
10:22 < hufg:#liferay> yeah probably with some tinkering
10:22 < jardineworks:#liferay> hufg, if you can... select the records from the VirtualHost table. Pick out the companyId for your nnew instance and then query the User_ table filtering by companyId
10:25 < hufg:#liferay> ok let's see
10:26 < hufg:#liferay> ooh it was test@maildomain.com
10:26 < jardineworks:#liferay> ;)
10:27 < dave_k:#liferay> anyway, thanks jardineworks... now I have to break that gently to the project lead... :/
10:28 < jardineworks:#liferay> dave_k, no problem. Good luck :)
10:28 < hufg:#liferay> dave_k: i'd probably check that the service.xml primary key maps to classPK
10:28 < hufg:#liferay> it's not always so obvious
10:29 < hufg:#liferay> before telling hehe
10:30 < hufg:#liferay> jardineworks: there seems to be something wrong with the omniadmin.user prop
10:30 < hufg:#liferay> in theory the first omniadmin should be admin to the other instance
10:30 < hufg:#liferay> s
10:30 < hufg:#liferay> but whatever it works!
10:31 < hufg:#liferay> jardineworks: i got some sick utils in this project
10:31 < jardineworks:#liferay> hufg, does the first admin user (from the default instance) have a user record scoped to the second instance companyId in the user table?
10:31 < hufg:#liferay> someone has made adt/structure/template instllation via deployment
10:31 < hufg:#liferay> + custom fields
10:32 < hufg:#liferay> first time i've seen this
10:32 < hufg:#liferay> no idea i'll probably leave it alone now and see it on monday
10:33 < jardineworks:#liferay> hufg, resources-importer on the theme you mean?
