--- Log opened Wed Apr 01 00:00:05 2015
--- Log opened Wed Apr 01 03:21:09 2015
03:21 -!- Topic for #liferay: Liferay Community Discussion Channel! *THIS CHANNEL IS LOGGED* (Log: http://goo.gl/SMte1N) Plz be patient - timezones matter :)  6.2 CE GA3 RELEASE http://goo.gl/ySBa9F   Forum: http://forums.liferay.com Homepage: http://liferay.org User Groups http://goo.gl/WFVtPe Nightly build http://releases.liferay.com/portal/nightly-master/
03:21 -!- Topic set by jhf [~cygnuseck@97-101-250-88.res.bhn.net] [Wed Feb 11 14:08:11 2015]
03:21 [Users #liferay]
03:21 [@ChanServ  ] [ Gorith      ] [ MagnoBooter] [ Tar-Minyatur] 
03:21 [ bijoo     ] [ henriquev   ] [ marcoceppi_] [ Tm_T        ] 
03:21 [ Bryanstein] [ jardineworks] [ Naenyn     ] [ twen        ] 
03:21 [ doged     ] [ jbub        ] [ plekplek   ] [ vsingleton  ] 
03:21 [ go_       ] [ josuebc     ] [ quercus    ] 
03:21 -!- Irssi: #liferay: Total of 19 nicks [1 ops, 0 halfops, 0 voices, 18 normal]
03:21 -!- Channel #liferay created Wed Nov 11 15:40:06 2009
03:21 -!- Irssi: Join to #liferay was synced in 5 secs
09:00 < jardineworks:#liferay> good morning guys
09:00 < jardineworks:#liferay> does anyone know if tags assigned to web content are supposed to be indexed?
10:58 < jardineworks:#liferay> hey topolik -- you around for a question?
12:18 -!- mode/#liferay [+o jhf] by ChanServ
14:07 < jardineworks:#liferay> jhf, are you tres busy at the moment?
14:07 <@jhf:#liferay> yeah - we just did a new CE release https://www.liferay.com/web/james.falkner/blog/-/blogs/liferay-portal-6-3a-released-
14:07 <@jhf:#liferay> getting lots of interest
14:09 < jardineworks:#liferay> jhf, ah ok
14:20 <@jhf:#liferay> jardineworks: clearly you have not read the release details
14:21 <@jhf:#liferay> you better check it out! important details for you and your clients.
14:45 < jardineworks:#liferay> jhf, I have not! really? do you have a llink handy?
14:45 <@jhf:#liferay> jardineworks: https://www.liferay.com/web/james.falkner/blog/-/blogs/liferay-portal-6-3a-released-
14:47 < jardineworks:#liferay> april fools
14:47 < jardineworks:#liferay> please tell me -- its april fools
14:48 < jardineworks:#liferay> LOL
14:48 < jardineworks:#liferay> best blog post ever
14:48 < jardineworks:#liferay> "A valid credit card is now required to activate your installation. We may share this information with our advertising "partners"."
14:48 < jardineworks:#liferay> I like that one jhf
14:49 <@jhf:#liferay> :)
14:49 <@jhf:#liferay> so to answer your original question - not super busy today :)
14:49 < jardineworks:#liferay> wait -- does that mean that you're NOT actually busy and you can noodle something with me? lol
14:49 <@jhf:#liferay> have one meeting in 70 minutes
14:49 <@jhf:#liferay> I can for a little bit. I mean I have stuff to do. just nothing urgently due TODAY.
14:49 < jardineworks:#liferay> jhf, ok -- do you remember my multi-domain problem?
14:50 <@jhf:#liferay> heh.. ummmmmm... I don't think so. the last thing I remember was the locale thing
14:50 < jardineworks:#liferay> jhf, sort of
14:51 < jardineworks:#liferay> jhf, refresher. Client has multiple hosts that you need to point to a single company.
14:51 <@jhf:#liferay> you mean multiple hostnames? like host1.company.com and host2.company.com that should point to a single company in Liferay?
14:51 < jardineworks:#liferay> jhf, So originally I was looking at EXT plugging that to support a locale + host + company id approach, but it's freakin' bananas -- so we're going a much simpler route.
14:52 < jardineworks:#liferay> jhf, yeah, and they're not even close. Like businesscenter and carrefourdaffaires.
14:52 < jardineworks:#liferay> same company
14:52 < jardineworks:#liferay> so the current way liferay does it is a bust for them
14:52 < jardineworks:#liferay> they're doing it anyway, but they broke the constraint on the virtualhost table and are manually adding secondary records with the same company id
14:53 < jardineworks:#liferay> Lotsa problems with staging, no proof, but likely related.
14:53 < jardineworks:#liferay> ANYWAY!
14:53 < jardineworks:#liferay> ... solution time.
14:54 < jardineworks:#liferay> jhf, What I have propose (and we're working on) is simple. Use the property to retrieve the language from the HTTP Request header (accept-language). On the way in, for say french.external.com .. change the host in the header to internal.com, and set the language to french. For english go from english.external.com to internal.com and set the header to english
14:54 < jardineworks:#liferay> easy peasy... that works.
14:54 < jardineworks:#liferay> On the way out -- here is the tricky bit
14:55 < jardineworks:#liferay> we're using an F5 which has a nifty STREAM:: feature. It allows you to string replace.
14:55 < jardineworks:#liferay> so we look for internal.com and replace with either french.external,com or english.external,.com -- depending on te GUEST_LANGUAGE_ID cookie value.
14:55 < jardineworks:#liferay> the odd thing
14:56 < jardineworks:#liferay> SOME stuff in the page is replace.
14:56 < jardineworks:#liferay> some is not.
14:56 < jardineworks:#liferay> those that are not appear to be PORTLET stuff.
14:56 < jardineworks:#liferay> so for example, the header image? changes. The forgot password link? no change.
14:57 <@jhf:#liferay> are those links prefixed with the hostname?
14:57 <@jhf:#liferay> (in the HTML going back to the client side)
14:57 < jardineworks:#liferay> I checked the source and I can see <portlet:actionURL/> or <portlet:renderURL/> tags -- and when i trace them back I get all the way to the PortalImpl class -- getPortalURL method
14:57 < jardineworks:#liferay> jhf, when I look at any of the source in the page, all links have hosts in them. None of them are relative.
14:58 <@jhf:#liferay> ok is it a bug in the F5 STREAM:: thingy that it's not properly rewriting the URLs ?
14:58 <@jhf:#liferay> maybe I don't get what you're doing, but it sounds like you've got a load balancer that is supposed to be rewriting URLs in the outgoing html?
14:59 < jardineworks:#liferay> jhf, exactly
14:59 < jardineworks:#liferay> but I don't think it is a bug because some of them are being rewritten
15:00 < jardineworks:#liferay> I guess I just wasn't sure if there was something special about portlet urls vs "portal" urls.
15:01 < jardineworks:#liferay> but when I load the home page... all the source for the page, meaning the markup for the portlets and everything, -- that's all part of ONE request right?
15:02 < jardineworks:#liferay> jhf, do you know if there is a class where I can set a breakpoint to see the full response body BEFORE it is written to the proxy?
15:02 <@jhf:#liferay> yep it should be 1 request. I don't think we do any automatic ajaxification of portlet content
15:02 <@jhf:#liferay> I would add a new servlet filter that is at the end of the processing chain but I'm not sure where that end of chain is.
15:03 <@jhf:#liferay> you could also set a breakpoint in that final filter if you knew which final filter it was
15:04 < jardineworks:#liferay> hmmm.. maybe a service.post hook?
