--- Log opened Tue Apr 28 00:00:43 2015
00:48 < kravigupta:#liferay> Hello..
00:48 < kravigupta:#liferay> do we have liferay sync source available to modify/customize?
--- Log opened Tue Apr 28 03:21:09 2015
03:21 -!- Topic for #liferay: Liferay Community Discussion Channel! *THIS CHANNEL IS LOGGED* (Log: http://goo.gl/SMte1N) Plz be patient - timezones matter :)  6.2 CE GA4 RELEASE http://goo.gl/AjubK5   Forum: http://forums.liferay.com Homepage: http://liferay.org User Groups http://goo.gl/WFVtPe Nightly build http://releases.liferay.com/portal/nightly-master/
03:21 -!- Topic set by jhf [~cygnuseck@97-101-250-88.res.bhn.net] [Fri Apr 17 17:31:24 2015]
03:21 [Users #liferay]
03:21 [@ChanServ  ] [ henriquev   ] [ marcoceppi] [ Tar-Minyatur] 
03:21 [ bijoo     ] [ jardineworks] [ modd_     ] [ Tm_T        ] 
03:21 [ bijoo_    ] [ jbub        ] [ Naenyn    ] [ topolik     ] 
03:21 [ Bryanstein] [ kravigupta  ] [ nicolas_FR] [ twen        ] 
03:21 [ doged     ] [ longbeach   ] [ plekplek  ] [ vsingleton  ] 
03:21 [ Gorith_   ] [ MagnoBooter ] [ quercus   ] 
03:21 -!- Irssi: #liferay: Total of 23 nicks [1 ops, 0 halfops, 0 voices, 22 normal]
03:21 -!- Channel #liferay created Wed Nov 11 15:40:06 2009
03:21 -!- Irssi: Join to #liferay was synced in 6 secs
09:32 < Andrea_:#liferay> good morning to everybody
09:39 < twen:#liferay> Good afternoon Andrea_ :)
09:44 < Andrea_:#liferay> I was trying to render First Name field in the my account portlet not editable for the role "user", i created a hook but i don't know where and what i have to modify something, can you help me?
09:49 < jardineworks:#liferay> Andrea_, I can help you but I need 30 minutes first.
09:49 < jardineworks:#liferay> Andrea_, you created a JSP hook right?
09:49 < Andrea_:#liferay> hi jardine , no problem , take your time of course
09:50 < Andrea_:#liferay> yes i created the hook and overridden edit_user.jsp
09:50 < Andrea_:#liferay> well, i just opened it, still did not edited tho..
09:56 < jardineworks:#liferay> Andrea_, ok cool -- have you found the field that you want to disable?
09:57 < Andrea_:#liferay> no, i'm lost in this jsp
10:01 < jardineworks:#liferay> lol
10:01 < jardineworks:#liferay> ok
10:03 < jardineworks:#liferay> Andrea_, Ok -- I'm going teach  you how to find it. Go to your chrome browser and use the inspector to find some html markup that is specific to the field.
10:03 < jardineworks:#liferay> probably a class name of a div id or something
10:04 < Andrea_:#liferay> ok
10:04 < Andrea_:#liferay> its f12 feature right?
10:04 < jardineworks:#liferay> yep
10:05 < Andrea_:#liferay> i'm ready
10:06 < jardineworks:#liferay> ok -- find some markup specific to that field
10:07 < jardineworks:#liferay> whcih field is it you are after again?
10:08 < Andrea_:#liferay> i need to render some fields like screen name/first name etc like User id is shown, not editable
10:09 < Andrea_:#liferay> we can start from first name
10:09 < jardineworks:#liferay> ok so you need to find some markup for the first name
10:10 < Andrea_:#liferay> yes
10:12 < jardineworks:#liferay> find it?
10:12 < jardineworks:#liferay> what did you find?
10:12 < Andrea_:#liferay> <input class="field lfr-input-text" id="_125_firstName" name="_125_firstName" style="max-width: 150px; " type="text" value="test" maxlength="75" aria-required="true">
10:12 < Andrea_:#liferay> i positioned mouse over the field and clicked it and got this
10:14 < jardineworks:#liferay> so do a find in the source code for "firstName"
10:15 < Andrea_:#liferay> i did it, in edit_user.jsp , but there isn't anything like that
10:17 < jardineworks:#liferay> one sec
10:17 < jardineworks:#liferay> right
10:18 < jardineworks:#liferay> this uses a form navigator -- which basically gives you that little menu on the right hand side. The way that works is that each of those links is a separate JSP. In the JSP you're editing you can see this --
10:18 < jardineworks:#liferay> 	<liferay-ui:form-navigator
10:18 < jardineworks:#liferay> 		backURL="<%= backURL %>"
10:18 < jardineworks:#liferay> 		categoryNames="<%= _CATEGORY_NAMES %>"
10:18 < jardineworks:#liferay> 		categorySections="<%= categorySections %>"
10:18 < jardineworks:#liferay> 		htmlBottom="<%= htmlBottom %>"
10:18 < jardineworks:#liferay> 		htmlTop="<%= htmlTop %>"
10:18 < jardineworks:#liferay> 		jspPath="/html/portlet/users_admin/user/"
10:18 < jardineworks:#liferay> 	/>
10:18 < jardineworks:#liferay> so really, you are not editing this jsp... but rather one of the jsps under /html/portlet/users_admin/user
10:19 < Andrea_:#liferay> ok
10:20 < jardineworks:#liferay> check out the details_user_name.jspf
10:20 < Andrea_:#liferay> then i guess the jsp i have to edit is details.jsp?
10:20 < jardineworks:#liferay> in the details_user_name.jspf -- yeah
10:21 < jardineworks:#liferay> which means in your jsp-hook plugin you need to add a user folder and then this file.
10:22 < Andrea_:#liferay> did it.. may i ask you if i can post link to screenshots in this chat?
10:22 < jardineworks:#liferay> sure
10:22 < jardineworks:#liferay> as long as you don't care about others seeing it
10:23 < Andrea_:#liferay> http://gyazo.com/66a24f371fd82281404ed8eac0d3e722
10:23 < jardineworks:#liferay> bah that site wants me to create an account --
10:24 < jardineworks:#liferay> can you use another site that is free :)
10:24 < Andrea_:#liferay> ok sorry did not know
10:25 < Andrea_:#liferay> its strange, can u test this ? http://i.gyazo.com/66a24f371fd82281404ed8eac0d3e722.png
10:26 < jardineworks:#liferay> no worries -- just can't be bothered to sign up when there are so many free ones out there. I already have a million accounts I have forgotten I created :)
10:26 < jardineworks:#liferay> see it
10:26 < Andrea_:#liferay> nice i copied the wrong link sorry
10:26 < jardineworks:#liferay> ok -- but I don't think that will work. JSP hooks work on the premise that the name of the file you are hooking is IDENTICAL in your project with the one on the server.
10:27 < jardineworks:#liferay> the firstName field is not in the details.jsp
10:27 < jardineworks:#liferay> it is in the details_user_name.jspf
10:29 < Andrea_:#liferay> right..added it to the project
10:29 < Andrea_:#liferay> sorry i'm a total newbee
10:30 < jardineworks:#liferay> ok -- it's ok, I remember. :)
10:30 < jardineworks:#liferay> so now, you want to disable the firstname and lastname fields is that it?
10:32 < Andrea_:#liferay> i want them to be rendered like USER ID (not editable) for normal users and editable for a custom role i did in the portal
10:32 < jardineworks:#liferay> ok
10:32 < jardineworks:#liferay> let's start by making sure your hook works.
10:33 < jardineworks:#liferay> modified the fields and set them to disabled.
10:34 < jardineworks:#liferay> these are AUI fields, but I think you can just add a keyword -- disabled -- before the e/>
10:34 < jardineworks:#liferay>  />*
10:34 < jardineworks:#liferay> once you have that, deploy the hook and validate that the fields are in fact disabled now
10:35 < jardineworks:#liferay> (which means you know your hook is working because your changes are being picked up)
10:36 < Andrea_:#liferay> ok, i'm finding the way to disable it
10:36 < jardineworks:#liferay> disabled ... didn't work?
10:36 < jardineworks:#liferay> that's normally how you disable an HTML field
10:38 < jardineworks:#liferay> it might be disabled="true"
10:40 < Andrea_:#liferay> deploying it
10:42 < Andrea_:#liferay> ok
10:42 < Andrea_:#liferay> disabled successfully
10:43 < jardineworks:#liferay> great!
10:43 < jardineworks:#liferay> now we just need the logic to determine whether or not to add that tag right?
10:43 < jardineworks:#liferay> so what is the name of your custom ROLE?
10:43 < Andrea_:#liferay> yes we do
10:43 < Andrea_:#liferay> checking it
10:44 < Andrea_:#liferay> amministratore ufficio personale
10:45 < jardineworks:#liferay> :|
10:45 < jardineworks:#liferay> that is the role name?
10:45 < Andrea_:#liferay> yes xD
10:45 < Andrea_:#liferay> why? are you italian? :D
10:45 < jardineworks:#liferay> lol - ok, and do you place to assign that role to each individual user? or do you plan to have a user group that they are a member of (where the user group is linked to the role)
10:46 < jardineworks:#liferay> I am not
10:46 < jardineworks:#liferay> but I think we share the same name .. my name is Andrew :)
10:46 < Andrea_:#liferay> hahaha yeah!
10:46 < jardineworks:#liferay> but my mother is Spanish (from Spain) so we can pretend my name is Andres :)
10:47 < Andrea_:#liferay> i am planning to assign this role to the hr section of my company
10:47 < Andrea_:#liferay> first name should be disabled to people with just USER role
10:48 < Andrea_:#liferay> (normal employee)
10:49 < jardineworks:#liferay> well
10:49 < jardineworks:#liferay> so I would not use that approach. Instead of using a negative test you should use a positive test.
10:51 < jardineworks:#liferay> so, you want to check "IF user HAS ROLE <your crazy role name> or HAS ROLE "Administrator" then don't put disabled,... and in all other cases you want to have disabled.
10:51 < jardineworks:#liferay> because the person in HR might still have the User role right?
10:51 < Andrea_:#liferay> i guess every user has a collection of roles assigned, right? it would be nice to check if that collection.size=1 and the only item is User
10:52 < jardineworks:#liferay> well, we're going to make it better than that :)... we're going to make it configurable so that you don't have to change your code every time a new role that should be allowed to do it is added.
10:52 < jardineworks:#liferay> ok ... let's start by adding the configuration.
10:52 < Andrea_:#liferay> well, i can work on that, i'm building this portal from scratch so i can decide everything..
10:52 < jardineworks:#liferay> what's your company called?
10:52 < Andrea_:#liferay> synclab
10:53 < jardineworks:#liferay> ok -- so in your portal-ext add something like this (one sec)
10:55 < Andrea_:#liferay> i thought it was a good idea to give every new user a common base role(user in this case), because i will need to develop a portlet to do presence surveyor. And also the boss has to compile his presence form
10:55 < Andrea_:#liferay> at the end of the month
10:56 < jardineworks:#liferay> well, the problem with using USER is that even people are are in other roles could have it right? so I could be both a USER and an ADMINISTRATOR.
10:56 < jardineworks:#liferay> normally in permission checking you check for the role/usergroup that IS allowed to do something
10:57 < jardineworks:#liferay> so in your portal-ext add this --
10:57 < jardineworks:#liferay> ## ------------------------------------------
10:57 < jardineworks:#liferay> ## Custom Properties for USER ADMIN Hook
10:57 < jardineworks:#liferay> ##
10:57 < jardineworks:#liferay> 	#
10:57 < jardineworks:#liferay> 	# Roles allowed to edit user details
10:57 < jardineworks:#liferay> 	#
10:57 < jardineworks:#liferay> 	com.synclab.user.admin.edit.roles=Administrator,HR Employee
10:57 < jardineworks:#liferay> 	#
10:57 < jardineworks:#liferay> 	# User Groups allowed to edit user details
10:57 < jardineworks:#liferay> 	#
10:57 < jardineworks:#liferay> 	com.synclab.user.admin.edit.usergroups=HR
10:57 < jardineworks:#liferay> spaced nicer than that obviously :)
10:57 < jardineworks:#liferay> the names can be whatever you want -- I am just trying to give you and example that is descriptive.
10:58 < jardineworks:#liferay> I have to go for a meeting ... I'll be back, but the next thing we're going to do is RETRIEVE those settings in the JSP ...
10:58 < jardineworks:#liferay> and then test the user for them, and set some boolean flags that we can use to determine whether or not to output "disabled=true"
10:58 < jardineworks:#liferay> or false.
