--- Log opened Fri Mar 21 00:00:08 2014
04:48 < nicolas_FR:#liferay> hi there
04:50 < nicolas_FR:#liferay> problem with a form not being populated : https://www.liferay.com/community/forums/-/message_boards/message/35932749
04:50 < nicolas_FR:#liferay> If you have any ideas, I'll take them !
05:16 < nicolas_FR_:#liferay> I have a long jsp with lots of fields, and 2 steps I want to submit info. 1st step is in the middle of the jsp, last one at the end. It's 1 big DynaValidatorForm, and 1st step is here to update some database and go back to the same jsp. Is there any traps doing so ?
05:17 < nicolas_FR_:#liferay> the 2 submits have differents actions, so I set 1st action in the form action attribute, and I generate 2nd action url in a html:link, which href I copy to the form action. Any problem with that ?
05:29 < modd_:#liferay> hi topolik, just a short question. how's the quality of the czech language file?
06:05 < nicolas_FR_:#liferay> anyone know why post data would not appear in the action form ?
06:07 < modd_:#liferay> can you explain the problem a little bit more?
06:07 < nicolas_FR_:#liferay> sure
06:07 < nicolas_FR_:#liferay> I've got 1 form.jsp page
06:08 < nicolas_FR_:#liferay> this page will be submitted 2 times. 1st submit to 1 actionA.do, 2nd submit to another actionB.do. Same DynaValidatorForm, same success page (the form.jsp).
06:10 < modd_:#liferay> submitted two times? how? why?
06:10 < nicolas_FR_:#liferay> First submit is succesfull, actionA gets the form's data and everybody is happy. I then display again the form.jsp with datas from the session form, and I continue to fill my fields. Second submit (changing form action with javascript) is a failure : I enter the action, but my form object is still with parameters from 1st submit. Nothing more.
06:11 < modd_:#liferay> well yes, it's like you submit a form and then press f5 an you'll get the same parameters, eventhough you didn't fill the form the second time
06:12 < nicolas_FR_:#liferay> why ?
06:12 < nicolas_FR_:#liferay> Because : 1 - I change the action url. 2 - my form is filled with new fields. 3 - post data from firebug are good : every fields are filled.
06:15 < modd_:#liferay> let your form load the data from the request. if no data is there you'll have empty values. add another hidden input into the form named redirectTo with the current url of the page. after the first submit get post informations, set these informations into the actionResponse and make a actionResponse.sendRedirect(redirectTo); in your method. the second time the form will be shown oit's a fresh page, but this time with the additional i
06:16 < modd_:#liferay> the part with the redirectTo is my way of avoiding the f5 reload error
06:17 < modd_:#liferay> it's simple and clean
06:17 < nicolas_FR_:#liferay> but it's not a f5 error to me. 2nd submit actually has informations in the post data
06:17 < nicolas_FR_:#liferay> form is actually sent to the action, post data are full of completed fields (which would not happend with a f5 right ?)
06:18 < modd_:#liferay> well, but it's not supposed to be there. with f5 the form is not filled but the data is sent anyways.
06:18 < modd_:#liferay> your problem is indirectly linked to this one
06:19 < modd_:#liferay> don't rely on hidden post data, fill the informations you need by yourself
06:19 < nicolas_FR_:#liferay> ok.. I can try btw.. so.. clearly ...
06:19 < modd_:#liferay> do it explicit insteal of implicit
06:19 < modd_:#liferay> hope it helps :)
06:19 < nicolas_FR_:#liferay> let your form load the data from the request : this is my first submit right ?
06:20 < modd_:#liferay> your form input fields have default values
06:20 < nicolas_FR_:#liferay> I don't understand the solution actually
06:20 < modd_:#liferay> set these values with the content of the parameters you'll get from the request
06:20 < modd_:#liferay> these parameters are empty on the first load
06:20 < modd_:#liferay> but filled on the second
06:20 < nicolas_FR_:#liferay> isn't it automatic with form being in session ?
06:21 < modd_:#liferay> don't use it this way, pass all the informations you need by hand
06:22 < nicolas_FR_:#liferay> all the informations I need ? But it's user's input...not me
06:22 < modd_:#liferay> moment
06:29 < modd_:#liferay> some pseudo code: http://pastebin.com/MzyxPwER
06:29 < modd_:#liferay> first I'll fill foo and bar and submit, then I'll just fill baz
06:30 < modd_:#liferay> after sending foo and bar I'll get these values passed back to my form
06:30 < modd_:#liferay> forget about "value="<%=baz %>"" in the form, it doesn exist..copy paste error ;)
06:32 < nicolas_FR_:#liferay> so what's the difference between renderResponse.sendRedirect, and me doing a mapping.findforward ?
06:32 < modd_:#liferay> I'm redirecting the the page like it was before submitting anything. so the post data is gone
06:33 < nicolas_FR_:#liferay> ok, but the data will still be in the forms right ?
06:33 < modd_:#liferay> and well, it's just my suggestion, you don't have to use it ;)
06:33 < modd_:#liferay> the data will be passed back to the form after the reload
06:34 < modd_:#liferay> in the action method I'm setting the values back into the response so they are available in the request
06:35 < nicolas_FR_:#liferay> give me a moment so I give you the entire view, and then you say me if I'm saved or not :)
06:36 < nicolas_FR_:#liferay> complete view : Users will go through 2 portlets : portletA and portletB. PortletA is a form and gathers some info on user. If users want, after completing portletA, he can continue to portletB, which is another form (the one we're talking about).
